version: '3.0'

expectations:

  population_size: 50000

actions:

  design:
    run: r:latest analysis/R/design.R
    outputs:
      moderately_sensitive:
        metadata: output/metadata/metadata*
        chars: output/metadata/baseline_characteristics.rds
        formula: output/metadata/list_formula.rds
        strata: output/metadata/list_strata*.rds
        reweight: output/metadata/reweight_death.rds

  ## #################################### 
  ## over80s 
  ## #################################### 

  extract_over80s:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_over80s
      --output-format feather
    outputs:
      highly_sensitive:
        cohort: output/input_over80s.feather

  data_process_over80s:
    run: r:latest analysis/R/data_process.R over80s
    needs:
    - extract_over80s
    outputs:
      highly_sensitive:
        data: output/over80s/data/data_processed.rds
        datavaxlong: output/over80s/data/data_long_vax_dates.rds
        datavaxwide: output/over80s/data/data_wide_vax_dates.rds

  data_process_long_over80s:
    run: r:latest analysis/R/data_process_long.R over80s
    needs:
    - data_process_over80s
    outputs:
      highly_sensitive:
        data2: output/over80s/data/data_long_admission_dates.rds
        data3: output/over80s/data/data_long_admission_infectious_dates.rds
        data4: output/over80s/data/data_long_admission_noninfectious_dates.rds
        data5: output/over80s/data/data_long_pr_probable_covid_dates.rds
        data6: output/over80s/data/data_long_pr_suspected_covid_dates.rds
        data7: output/over80s/data/data_long_postest_dates.rds

  data_properties_over80s:
    run: r:latest analysis/R/data_properties.R output/over80s/data/data_processed.rds
      output/over80s/data_properties
    needs:
    - data_process_over80s
    outputs:
      moderately_sensitive:
        txt: output/over80s/data_properties/data_processed*.txt

  data_selection_over80s:
    run: r:latest analysis/R/data_selection.R over80s
    needs:
    - data_process_over80s
    outputs:
      highly_sensitive:
        cohort: output/over80s/data/data_cohort.rds
      moderately_sensitive:
        flow: output/over80s/data/flowchart.csv

  data_stset_over80s:
    run: r:latest analysis/R/data_stset.R over80s
    needs:
    - design
    - data_selection_over80s
    - data_process_long_over80s
    outputs:
      highly_sensitive:
        fixed: output/over80s/data/data_fixed.rds
        tte: output/over80s/data/data_tte.rds
        pt: output/over80s/data/data_pt.rds

  data_samples_over80s:
    run: r:latest analysis/R/data_samples.R over80s 0.1
    needs:
    - design
    - data_stset_over80s
    outputs:
      highly_sensitive:
        data: output/over80s/data/data_samples.rds

  check_ethnicity_over80s:
    run: r:latest analysis/R/check_ethnicity.R over80s
    needs:
    - data_process_over80s
    outputs:
      moderately_sensitive:
        tab: output/over80s/data/ethnicity_table*.txt

  descr_table1_over80s:
    run: r:latest analysis/R/descr_table1.R over80s
    needs:
    - design
    - data_selection_over80s
    outputs:
      highly_sensitive:
        rds: output/over80s/descriptive/tables/*.rds
      moderately_sensitive:
        html: output/over80s/descriptive/tables/table1.html

  descr_tableirrold_over80s:
    run: r:latest analysis/R/descr_tableirr.R over80s FALSE
    needs:
    - design
    - data_selection_over80s
    outputs:
      moderately_sensitive:
        html: output/over80s/descriptive/tables/table_irr_old.html
        csv: output/over80s/descriptive/tables/table_irr_old.csv

  descr_tableirr_over80s:
    run: r:latest analysis/R/descr_tableirr_lite.R over80s FALSE
    needs:
    - design
    - data_selection_over80s
    outputs:
      moderately_sensitive:
        html: output/over80s/descriptive/tables/table_irr.html
        csv: output/over80s/descriptive/tables/table_irr.csv

  descr_tableirr_exclude_over80s:
    run: r:latest analysis/R/descr_tableirr_lite.R over80s TRUE
    needs:
    - design
    - data_selection_over80s
    outputs:
      moderately_sensitive:
        html: output/over80s/descriptive/tables/table_irr_exclude_recentpostest.html
        csv: output/over80s/descriptive/tables/table_irr_exclude_recentpostest.csv

  descr_events_over80s:
    run: r:latest analysis/R/descr_events.R over80s
    needs:
    - design
    - data_stset_over80s
    outputs:
      highly_sensitive:
        rds: output/over80s/descriptive/plots/*.rds
      moderately_sensitive:
        plots: output/over80s/descriptive/plots/*.svg
        tables: output/over80s/descriptive/tables/*.csv

  ## #################################### 
  ## All 
  ## natural estimand 
  ## #################################### 

  descr_preflight_over80s_all_0:
    run: r:latest analysis/R/preflight.R over80s all 0 150000 50000
    needs:
    - design
    - data_stset_over80s
    outputs:
      moderately_sensitive:
        html: output/over80s/descriptive/model-checks/all/0/*.html
        csv: output/over80s/descriptive/model-checks/all/0/*.csv

  model_over80s_all_0_any_postest:
    run: r:latest analysis/R/dose_1/model_msm.R over80s all 0 any postest 150000 50000
    needs:
    - design
    - data_stset_over80s
    outputs:
      highly_sensitive:
        models: output/over80s/all/0/any/postest/model*.rds
        data: output/over80s/all/0/any/postest/data*.rds
      moderately_sensitive:
        weights: output/over80s/all/0/any/postest/weights*

  report_ipw_over80s_all_0_any_postest:
    run: r:latest analysis/R/dose_1/report_ipw.R over80s all 0 any postest
    needs:
    - design
    - model_over80s_all_0_any_postest
    outputs:
      highly_sensitive:
        broom: output/over80s/all/0/any/postest/broom*.rds
      moderately_sensitive:
        data: output/over80s/all/0/any/postest/broom*.csv

  report_msm_over80s_all_0_any_postest:
    run: r:latest analysis/R/dose_1/report_msm.R over80s all 0 any postest
    needs:
    - design
    - model_over80s_all_0_any_postest
    outputs:
      moderately_sensitive:
        svg: output/over80s/all/0/any/postest/VE_plot.svg
        png: output/over80s/all/0/any/postest/VE_plot.png
        tables: output/over80s/all/0/any/postest/estimates*.csv

  report_incidence_over80s_all_0_any_postest:
    run: r:latest analysis/R/dose_1/report_incidence.R over80s all 0 any postest
    needs:
    - design
    - model_over80s_all_0_any_postest
    outputs:
      highly_sensitive:
        data: output/over80s/all/0/any/postest/data_incidence.rds
      moderately_sensitive:
        cmlsvg: output/over80s/all/0/any/postest/cml_incidence*.svg
        cmlpng: output/over80s/all/0/any/postest/cml_incidence*.png
        trendsvg: output/over80s/all/0/any/postest/time*.svg
        trendpng: output/over80s/all/0/any/postest/time*.png

  model_over80s_all_0_pfizer_postest:
    run: r:latest analysis/R/dose_1/model_msm.R over80s all 0 pfizer postest 150000
      50000
    needs:
    - design
    - data_stset_over80s
    outputs:
      highly_sensitive:
        models: output/over80s/all/0/pfizer/postest/model*.rds
        data: output/over80s/all/0/pfizer/postest/data*.rds
      moderately_sensitive:
        weights: output/over80s/all/0/pfizer/postest/weights*

  report_ipw_over80s_all_0_pfizer_postest:
    run: r:latest analysis/R/dose_1/report_ipw.R over80s all 0 pfizer postest
    needs:
    - design
    - model_over80s_all_0_pfizer_postest
    outputs:
      highly_sensitive:
        broom: output/over80s/all/0/pfizer/postest/broom*.rds
      moderately_sensitive:
        data: output/over80s/all/0/pfizer/postest/broom*.csv

  report_msm_over80s_all_0_pfizer_postest:
    run: r:latest analysis/R/dose_1/report_msm.R over80s all 0 pfizer postest
    needs:
    - design
    - model_over80s_all_0_pfizer_postest
    outputs:
      moderately_sensitive:
        svg: output/over80s/all/0/pfizer/postest/VE_plot.svg
        png: output/over80s/all/0/pfizer/postest/VE_plot.png
        tables: output/over80s/all/0/pfizer/postest/estimates*.csv

  report_incidence_over80s_all_0_pfizer_postest:
    run: r:latest analysis/R/dose_1/report_incidence.R over80s all 0 pfizer postest
    needs:
    - design
    - model_over80s_all_0_pfizer_postest
    outputs:
      highly_sensitive:
        data: output/over80s/all/0/pfizer/postest/data_incidence.rds
      moderately_sensitive:
        cmlsvg: output/over80s/all/0/pfizer/postest/cml_incidence*.svg
        cmlpng: output/over80s/all/0/pfizer/postest/cml_incidence*.png
        trendsvg: output/over80s/all/0/pfizer/postest/time*.svg
        trendpng: output/over80s/all/0/pfizer/postest/time*.png

  model_over80s_all_0_az_postest:
    run: r:latest analysis/R/dose_1/model_msm.R over80s all 0 az postest 150000 50000
    needs:
    - design
    - data_stset_over80s
    outputs:
      highly_sensitive:
        models: output/over80s/all/0/az/postest/model*.rds
        data: output/over80s/all/0/az/postest/data*.rds
      moderately_sensitive:
        weights: output/over80s/all/0/az/postest/weights*

  report_ipw_over80s_all_0_az_postest:
    run: r:latest analysis/R/dose_1/report_ipw.R over80s all 0 az postest
    needs:
    - design
    - model_over80s_all_0_az_postest
    outputs:
      highly_sensitive:
        broom: output/over80s/all/0/az/postest/broom*.rds
      moderately_sensitive:
        data: output/over80s/all/0/az/postest/broom*.csv

  report_msm_over80s_all_0_az_postest:
    run: r:latest analysis/R/dose_1/report_msm.R over80s all 0 az postest
    needs:
    - design
    - model_over80s_all_0_az_postest
    outputs:
      moderately_sensitive:
        svg: output/over80s/all/0/az/postest/VE_plot.svg
        png: output/over80s/all/0/az/postest/VE_plot.png
        tables: output/over80s/all/0/az/postest/estimates*.csv

  report_incidence_over80s_all_0_az_postest:
    run: r:latest analysis/R/dose_1/report_incidence.R over80s all 0 az postest
    needs:
    - design
    - model_over80s_all_0_az_postest
    outputs:
      highly_sensitive:
        data: output/over80s/all/0/az/postest/data_incidence.rds
      moderately_sensitive:
        cmlsvg: output/over80s/all/0/az/postest/cml_incidence*.svg
        cmlpng: output/over80s/all/0/az/postest/cml_incidence*.png
        trendsvg: output/over80s/all/0/az/postest/time*.svg
        trendpng: output/over80s/all/0/az/postest/time*.png

  model_over80s_all_0_any_covidadmitted:
    run: r:latest analysis/R/dose_1/model_msm.R over80s all 0 any covidadmitted 150000
      50000
    needs:
    - design
    - data_stset_over80s
    outputs:
      highly_sensitive:
        models: output/over80s/all/0/any/covidadmitted/model*.rds
        data: output/over80s/all/0/any/covidadmitted/data*.rds
      moderately_sensitive:
        weights: output/over80s/all/0/any/covidadmitted/weights*

  report_ipw_over80s_all_0_any_covidadmitted:
    run: r:latest analysis/R/dose_1/report_ipw.R over80s all 0 any covidadmitted
    needs:
    - design
    - model_over80s_all_0_any_covidadmitted
    outputs:
      highly_sensitive:
        broom: output/over80s/all/0/any/covidadmitted/broom*.rds
      moderately_sensitive:
        data: output/over80s/all/0/any/covidadmitted/broom*.csv

  report_msm_over80s_all_0_any_covidadmitted:
    run: r:latest analysis/R/dose_1/report_msm.R over80s all 0 any covidadmitted
    needs:
    - design
    - model_over80s_all_0_any_covidadmitted
    outputs:
      moderately_sensitive:
        svg: output/over80s/all/0/any/covidadmitted/VE_plot.svg
        png: output/over80s/all/0/any/covidadmitted/VE_plot.png
        tables: output/over80s/all/0/any/covidadmitted/estimates*.csv

  report_incidence_over80s_all_0_any_covidadmitted:
    run: r:latest analysis/R/dose_1/report_incidence.R over80s all 0 any covidadmitted
    needs:
    - design
    - model_over80s_all_0_any_covidadmitted
    outputs:
      highly_sensitive:
        data: output/over80s/all/0/any/covidadmitted/data_incidence.rds
      moderately_sensitive:
        cmlsvg: output/over80s/all/0/any/covidadmitted/cml_incidence*.svg
        cmlpng: output/over80s/all/0/any/covidadmitted/cml_incidence*.png
        trendsvg: output/over80s/all/0/any/covidadmitted/time*.svg
        trendpng: output/over80s/all/0/any/covidadmitted/time*.png

  model_over80s_all_0_pfizer_covidadmitted:
    run: r:latest analysis/R/dose_1/model_msm.R over80s all 0 pfizer covidadmitted
      150000 50000
    needs:
    - design
    - data_stset_over80s
    outputs:
      highly_sensitive:
        models: output/over80s/all/0/pfizer/covidadmitted/model*.rds
        data: output/over80s/all/0/pfizer/covidadmitted/data*.rds
      moderately_sensitive:
        weights: output/over80s/all/0/pfizer/covidadmitted/weights*

  report_ipw_over80s_all_0_pfizer_covidadmitted:
    run: r:latest analysis/R/dose_1/report_ipw.R over80s all 0 pfizer covidadmitted
    needs:
    - design
    - model_over80s_all_0_pfizer_covidadmitted
    outputs:
      highly_sensitive:
        broom: output/over80s/all/0/pfizer/covidadmitted/broom*.rds
      moderately_sensitive:
        data: output/over80s/all/0/pfizer/covidadmitted/broom*.csv

  report_msm_over80s_all_0_pfizer_covidadmitted:
    run: r:latest analysis/R/dose_1/report_msm.R over80s all 0 pfizer covidadmitted
    needs:
    - design
    - model_over80s_all_0_pfizer_covidadmitted
    outputs:
      moderately_sensitive:
        svg: output/over80s/all/0/pfizer/covidadmitted/VE_plot.svg
        png: output/over80s/all/0/pfizer/covidadmitted/VE_plot.png
        tables: output/over80s/all/0/pfizer/covidadmitted/estimates*.csv

  report_incidence_over80s_all_0_pfizer_covidadmitted:
    run: r:latest analysis/R/dose_1/report_incidence.R over80s all 0 pfizer covidadmitted
    needs:
    - design
    - model_over80s_all_0_pfizer_covidadmitted
    outputs:
      highly_sensitive:
        data: output/over80s/all/0/pfizer/covidadmitted/data_incidence.rds
      moderately_sensitive:
        cmlsvg: output/over80s/all/0/pfizer/covidadmitted/cml_incidence*.svg
        cmlpng: output/over80s/all/0/pfizer/covidadmitted/cml_incidence*.png
        trendsvg: output/over80s/all/0/pfizer/covidadmitted/time*.svg
        trendpng: output/over80s/all/0/pfizer/covidadmitted/time*.png

  model_over80s_all_0_az_covidadmitted:
    run: r:latest analysis/R/dose_1/model_msm.R over80s all 0 az covidadmitted 150000
      50000
    needs:
    - design
    - data_stset_over80s
    outputs:
      highly_sensitive:
        models: output/over80s/all/0/az/covidadmitted/model*.rds
        data: output/over80s/all/0/az/covidadmitted/data*.rds
      moderately_sensitive:
        weights: output/over80s/all/0/az/covidadmitted/weights*

  report_ipw_over80s_all_0_az_covidadmitted:
    run: r:latest analysis/R/dose_1/report_ipw.R over80s all 0 az covidadmitted
    needs:
    - design
    - model_over80s_all_0_az_covidadmitted
    outputs:
      highly_sensitive:
        broom: output/over80s/all/0/az/covidadmitted/broom*.rds
      moderately_sensitive:
        data: output/over80s/all/0/az/covidadmitted/broom*.csv

  report_msm_over80s_all_0_az_covidadmitted:
    run: r:latest analysis/R/dose_1/report_msm.R over80s all 0 az covidadmitted
    needs:
    - design
    - model_over80s_all_0_az_covidadmitted
    outputs:
      moderately_sensitive:
        svg: output/over80s/all/0/az/covidadmitted/VE_plot.svg
        png: output/over80s/all/0/az/covidadmitted/VE_plot.png
        tables: output/over80s/all/0/az/covidadmitted/estimates*.csv

  report_incidence_over80s_all_0_az_covidadmitted:
    run: r:latest analysis/R/dose_1/report_incidence.R over80s all 0 az covidadmitted
    needs:
    - design
    - model_over80s_all_0_az_covidadmitted
    outputs:
      highly_sensitive:
        data: output/over80s/all/0/az/covidadmitted/data_incidence.rds
      moderately_sensitive:
        cmlsvg: output/over80s/all/0/az/covidadmitted/cml_incidence*.svg
        cmlpng: output/over80s/all/0/az/covidadmitted/cml_incidence*.png
        trendsvg: output/over80s/all/0/az/covidadmitted/time*.svg
        trendpng: output/over80s/all/0/az/covidadmitted/time*.png

  model_over80s_all_0_any_death:
    run: r:latest analysis/R/dose_1/model_msm.R over80s all 0 any death 150000 50000
    needs:
    - design
    - data_stset_over80s
    outputs:
      highly_sensitive:
        models: output/over80s/all/0/any/death/model*.rds
        data: output/over80s/all/0/any/death/data*.rds
      moderately_sensitive:
        weights: output/over80s/all/0/any/death/weights*

  report_ipw_over80s_all_0_any_death:
    run: r:latest analysis/R/dose_1/report_ipw.R over80s all 0 any death
    needs:
    - design
    - model_over80s_all_0_any_death
    outputs:
      highly_sensitive:
        broom: output/over80s/all/0/any/death/broom*.rds
      moderately_sensitive:
        data: output/over80s/all/0/any/death/broom*.csv

  report_msm_over80s_all_0_any_death:
    run: r:latest analysis/R/dose_1/report_msm.R over80s all 0 any death
    needs:
    - design
    - model_over80s_all_0_any_death
    outputs:
      moderately_sensitive:
        svg: output/over80s/all/0/any/death/VE_plot.svg
        png: output/over80s/all/0/any/death/VE_plot.png
        tables: output/over80s/all/0/any/death/estimates*.csv

  report_incidence_over80s_all_0_any_death:
    run: r:latest analysis/R/dose_1/report_incidence.R over80s all 0 any death
    needs:
    - design
    - model_over80s_all_0_any_death
    outputs:
      highly_sensitive:
        data: output/over80s/all/0/any/death/data_incidence.rds
      moderately_sensitive:
        cmlsvg: output/over80s/all/0/any/death/cml_incidence*.svg
        cmlpng: output/over80s/all/0/any/death/cml_incidence*.png
        trendsvg: output/over80s/all/0/any/death/time*.svg
        trendpng: output/over80s/all/0/any/death/time*.png

  model_over80s_all_0_pfizer_death:
    run: r:latest analysis/R/dose_1/model_msm.R over80s all 0 pfizer death 150000
      50000
    needs:
    - design
    - data_stset_over80s
    outputs:
      highly_sensitive:
        models: output/over80s/all/0/pfizer/death/model*.rds
        data: output/over80s/all/0/pfizer/death/data*.rds
      moderately_sensitive:
        weights: output/over80s/all/0/pfizer/death/weights*

  report_ipw_over80s_all_0_pfizer_death:
    run: r:latest analysis/R/dose_1/report_ipw.R over80s all 0 pfizer death
    needs:
    - design
    - model_over80s_all_0_pfizer_death
    outputs:
      highly_sensitive:
        broom: output/over80s/all/0/pfizer/death/broom*.rds
      moderately_sensitive:
        data: output/over80s/all/0/pfizer/death/broom*.csv

  report_msm_over80s_all_0_pfizer_death:
    run: r:latest analysis/R/dose_1/report_msm.R over80s all 0 pfizer death
    needs:
    - design
    - model_over80s_all_0_pfizer_death
    outputs:
      moderately_sensitive:
        svg: output/over80s/all/0/pfizer/death/VE_plot.svg
        png: output/over80s/all/0/pfizer/death/VE_plot.png
        tables: output/over80s/all/0/pfizer/death/estimates*.csv

  report_incidence_over80s_all_0_pfizer_death:
    run: r:latest analysis/R/dose_1/report_incidence.R over80s all 0 pfizer death
    needs:
    - design
    - model_over80s_all_0_pfizer_death
    outputs:
      highly_sensitive:
        data: output/over80s/all/0/pfizer/death/data_incidence.rds
      moderately_sensitive:
        cmlsvg: output/over80s/all/0/pfizer/death/cml_incidence*.svg
        cmlpng: output/over80s/all/0/pfizer/death/cml_incidence*.png
        trendsvg: output/over80s/all/0/pfizer/death/time*.svg
        trendpng: output/over80s/all/0/pfizer/death/time*.png

  model_over80s_all_0_az_death:
    run: r:latest analysis/R/dose_1/model_msm.R over80s all 0 az death 150000 50000
    needs:
    - design
    - data_stset_over80s
    outputs:
      highly_sensitive:
        models: output/over80s/all/0/az/death/model*.rds
        data: output/over80s/all/0/az/death/data*.rds
      moderately_sensitive:
        weights: output/over80s/all/0/az/death/weights*

  report_ipw_over80s_all_0_az_death:
    run: r:latest analysis/R/dose_1/report_ipw.R over80s all 0 az death
    needs:
    - design
    - model_over80s_all_0_az_death
    outputs:
      highly_sensitive:
        broom: output/over80s/all/0/az/death/broom*.rds
      moderately_sensitive:
        data: output/over80s/all/0/az/death/broom*.csv

  report_msm_over80s_all_0_az_death:
    run: r:latest analysis/R/dose_1/report_msm.R over80s all 0 az death
    needs:
    - design
    - model_over80s_all_0_az_death
    outputs:
      moderately_sensitive:
        svg: output/over80s/all/0/az/death/VE_plot.svg
        png: output/over80s/all/0/az/death/VE_plot.png
        tables: output/over80s/all/0/az/death/estimates*.csv

  report_incidence_over80s_all_0_az_death:
    run: r:latest analysis/R/dose_1/report_incidence.R over80s all 0 az death
    needs:
    - design
    - model_over80s_all_0_az_death
    outputs:
      highly_sensitive:
        data: output/over80s/all/0/az/death/data_incidence.rds
      moderately_sensitive:
        cmlsvg: output/over80s/all/0/az/death/cml_incidence*.svg
        cmlpng: output/over80s/all/0/az/death/cml_incidence*.png
        trendsvg: output/over80s/all/0/az/death/time*.svg
        trendpng: output/over80s/all/0/az/death/time*.png

  report_ipw_over80s_all_0:
    run: r:latest analysis/R/dose_1/report_ipw_combined.R over80s all 0 death
    needs:
    - design
    - report_ipw_over80s_all_0_any_death
    - report_ipw_over80s_all_0_pfizer_death
    - report_ipw_over80s_all_0_az_death
    outputs:
      moderately_sensitive:
        svg: output/over80s/all/0/combined/plot_vax1.svg
        csv: output/over80s/all/0/combined/tab_vax1.csv
        csv_wide: output/over80s/all/0/combined/tab_vax1_wide.csv

  report_msm_over80s_all_0:
    run: r:latest analysis/R/dose_1/report_msm_combined.R over80s all 0
    needs:
    - design
    - report_msm_over80s_all_0_any_postest
    - report_msm_over80s_all_0_any_covidadmitted
    - report_msm_over80s_all_0_any_death
    - report_msm_over80s_all_0_pfizer_postest
    - report_msm_over80s_all_0_pfizer_covidadmitted
    - report_msm_over80s_all_0_pfizer_death
    - report_msm_over80s_all_0_az_postest
    - report_msm_over80s_all_0_az_covidadmitted
    - report_msm_over80s_all_0_az_death
    outputs:
      moderately_sensitive:
        svg: output/over80s/all/0/combined/VE*.svg
        png: output/over80s/all/0/combined/VE*.png
        csv: output/over80s/all/0/combined/*.csv

  report_incidence_over80s_all_0:
    run: r:latest analysis/R/dose_1/report_incidence_combined.R over80s all 0
    needs:
    - design
    - report_incidence_over80s_all_0_any_postest
    - report_incidence_over80s_all_0_any_covidadmitted
    - report_incidence_over80s_all_0_any_death
    - report_incidence_over80s_all_0_pfizer_postest
    - report_incidence_over80s_all_0_pfizer_covidadmitted
    - report_incidence_over80s_all_0_pfizer_death
    - report_incidence_over80s_all_0_az_postest
    - report_incidence_over80s_all_0_az_covidadmitted
    - report_incidence_over80s_all_0_az_death
    outputs:
      moderately_sensitive:
        svg: output/over80s/all/0/combined/cml_incidence*.svg
        png: output/over80s/all/0/combined/cml_incidence*.png

  ## #################################### 
  ## All 
  ## modified estimand 
  ## #################################### 

  descr_preflight_over80s_all_Inf:
    run: r:latest analysis/R/preflight.R over80s all Inf 150000 50000
    needs:
    - design
    - data_stset_over80s
    outputs:
      moderately_sensitive:
        html: output/over80s/descriptive/model-checks/all/Inf/*.html
        csv: output/over80s/descriptive/model-checks/all/Inf/*.csv

  model_over80s_all_Inf_any_postest:
    run: r:latest analysis/R/dose_1/model_msm.R over80s all Inf any postest 150000
      50000
    needs:
    - design
    - data_stset_over80s
    outputs:
      highly_sensitive:
        models: output/over80s/all/Inf/any/postest/model*.rds
        data: output/over80s/all/Inf/any/postest/data*.rds
      moderately_sensitive:
        weights: output/over80s/all/Inf/any/postest/weights*

  report_ipw_over80s_all_Inf_any_postest:
    run: r:latest analysis/R/dose_1/report_ipw.R over80s all Inf any postest
    needs:
    - design
    - model_over80s_all_Inf_any_postest
    outputs:
      highly_sensitive:
        broom: output/over80s/all/Inf/any/postest/broom*.rds
      moderately_sensitive:
        data: output/over80s/all/Inf/any/postest/broom*.csv

  report_msm_over80s_all_Inf_any_postest:
    run: r:latest analysis/R/dose_1/report_msm.R over80s all Inf any postest
    needs:
    - design
    - model_over80s_all_Inf_any_postest
    outputs:
      moderately_sensitive:
        svg: output/over80s/all/Inf/any/postest/VE_plot.svg
        png: output/over80s/all/Inf/any/postest/VE_plot.png
        tables: output/over80s/all/Inf/any/postest/estimates*.csv

  report_incidence_over80s_all_Inf_any_postest:
    run: r:latest analysis/R/dose_1/report_incidence.R over80s all Inf any postest
    needs:
    - design
    - model_over80s_all_Inf_any_postest
    outputs:
      highly_sensitive:
        data: output/over80s/all/Inf/any/postest/data_incidence.rds
      moderately_sensitive:
        cmlsvg: output/over80s/all/Inf/any/postest/cml_incidence*.svg
        cmlpng: output/over80s/all/Inf/any/postest/cml_incidence*.png
        trendsvg: output/over80s/all/Inf/any/postest/time*.svg
        trendpng: output/over80s/all/Inf/any/postest/time*.png

  model_over80s_all_Inf_pfizer_postest:
    run: r:latest analysis/R/dose_1/model_msm.R over80s all Inf pfizer postest 150000
      50000
    needs:
    - design
    - data_stset_over80s
    outputs:
      highly_sensitive:
        models: output/over80s/all/Inf/pfizer/postest/model*.rds
        data: output/over80s/all/Inf/pfizer/postest/data*.rds
      moderately_sensitive:
        weights: output/over80s/all/Inf/pfizer/postest/weights*

  report_ipw_over80s_all_Inf_pfizer_postest:
    run: r:latest analysis/R/dose_1/report_ipw.R over80s all Inf pfizer postest
    needs:
    - design
    - model_over80s_all_Inf_pfizer_postest
    outputs:
      highly_sensitive:
        broom: output/over80s/all/Inf/pfizer/postest/broom*.rds
      moderately_sensitive:
        data: output/over80s/all/Inf/pfizer/postest/broom*.csv

  report_msm_over80s_all_Inf_pfizer_postest:
    run: r:latest analysis/R/dose_1/report_msm.R over80s all Inf pfizer postest
    needs:
    - design
    - model_over80s_all_Inf_pfizer_postest
    outputs:
      moderately_sensitive:
        svg: output/over80s/all/Inf/pfizer/postest/VE_plot.svg
        png: output/over80s/all/Inf/pfizer/postest/VE_plot.png
        tables: output/over80s/all/Inf/pfizer/postest/estimates*.csv

  report_incidence_over80s_all_Inf_pfizer_postest:
    run: r:latest analysis/R/dose_1/report_incidence.R over80s all Inf pfizer postest
    needs:
    - design
    - model_over80s_all_Inf_pfizer_postest
    outputs:
      highly_sensitive:
        data: output/over80s/all/Inf/pfizer/postest/data_incidence.rds
      moderately_sensitive:
        cmlsvg: output/over80s/all/Inf/pfizer/postest/cml_incidence*.svg
        cmlpng: output/over80s/all/Inf/pfizer/postest/cml_incidence*.png
        trendsvg: output/over80s/all/Inf/pfizer/postest/time*.svg
        trendpng: output/over80s/all/Inf/pfizer/postest/time*.png

  model_over80s_all_Inf_az_postest:
    run: r:latest analysis/R/dose_1/model_msm.R over80s all Inf az postest 150000
      50000
    needs:
    - design
    - data_stset_over80s
    outputs:
      highly_sensitive:
        models: output/over80s/all/Inf/az/postest/model*.rds
        data: output/over80s/all/Inf/az/postest/data*.rds
      moderately_sensitive:
        weights: output/over80s/all/Inf/az/postest/weights*

  report_ipw_over80s_all_Inf_az_postest:
    run: r:latest analysis/R/dose_1/report_ipw.R over80s all Inf az postest
    needs:
    - design
    - model_over80s_all_Inf_az_postest
    outputs:
      highly_sensitive:
        broom: output/over80s/all/Inf/az/postest/broom*.rds
      moderately_sensitive:
        data: output/over80s/all/Inf/az/postest/broom*.csv

  report_msm_over80s_all_Inf_az_postest:
    run: r:latest analysis/R/dose_1/report_msm.R over80s all Inf az postest
    needs:
    - design
    - model_over80s_all_Inf_az_postest
    outputs:
      moderately_sensitive:
        svg: output/over80s/all/Inf/az/postest/VE_plot.svg
        png: output/over80s/all/Inf/az/postest/VE_plot.png
        tables: output/over80s/all/Inf/az/postest/estimates*.csv

  report_incidence_over80s_all_Inf_az_postest:
    run: r:latest analysis/R/dose_1/report_incidence.R over80s all Inf az postest
    needs:
    - design
    - model_over80s_all_Inf_az_postest
    outputs:
      highly_sensitive:
        data: output/over80s/all/Inf/az/postest/data_incidence.rds
      moderately_sensitive:
        cmlsvg: output/over80s/all/Inf/az/postest/cml_incidence*.svg
        cmlpng: output/over80s/all/Inf/az/postest/cml_incidence*.png
        trendsvg: output/over80s/all/Inf/az/postest/time*.svg
        trendpng: output/over80s/all/Inf/az/postest/time*.png

  model_over80s_all_Inf_any_covidadmitted:
    run: r:latest analysis/R/dose_1/model_msm.R over80s all Inf any covidadmitted
      150000 50000
    needs:
    - design
    - data_stset_over80s
    outputs:
      highly_sensitive:
        models: output/over80s/all/Inf/any/covidadmitted/model*.rds
        data: output/over80s/all/Inf/any/covidadmitted/data*.rds
      moderately_sensitive:
        weights: output/over80s/all/Inf/any/covidadmitted/weights*

  report_ipw_over80s_all_Inf_any_covidadmitted:
    run: r:latest analysis/R/dose_1/report_ipw.R over80s all Inf any covidadmitted
    needs:
    - design
    - model_over80s_all_Inf_any_covidadmitted
    outputs:
      highly_sensitive:
        broom: output/over80s/all/Inf/any/covidadmitted/broom*.rds
      moderately_sensitive:
        data: output/over80s/all/Inf/any/covidadmitted/broom*.csv

  report_msm_over80s_all_Inf_any_covidadmitted:
    run: r:latest analysis/R/dose_1/report_msm.R over80s all Inf any covidadmitted
    needs:
    - design
    - model_over80s_all_Inf_any_covidadmitted
    outputs:
      moderately_sensitive:
        svg: output/over80s/all/Inf/any/covidadmitted/VE_plot.svg
        png: output/over80s/all/Inf/any/covidadmitted/VE_plot.png
        tables: output/over80s/all/Inf/any/covidadmitted/estimates*.csv

  report_incidence_over80s_all_Inf_any_covidadmitted:
    run: r:latest analysis/R/dose_1/report_incidence.R over80s all Inf any covidadmitted
    needs:
    - design
    - model_over80s_all_Inf_any_covidadmitted
    outputs:
      highly_sensitive:
        data: output/over80s/all/Inf/any/covidadmitted/data_incidence.rds
      moderately_sensitive:
        cmlsvg: output/over80s/all/Inf/any/covidadmitted/cml_incidence*.svg
        cmlpng: output/over80s/all/Inf/any/covidadmitted/cml_incidence*.png
        trendsvg: output/over80s/all/Inf/any/covidadmitted/time*.svg
        trendpng: output/over80s/all/Inf/any/covidadmitted/time*.png

  model_over80s_all_Inf_pfizer_covidadmitted:
    run: r:latest analysis/R/dose_1/model_msm.R over80s all Inf pfizer covidadmitted
      150000 50000
    needs:
    - design
    - data_stset_over80s
    outputs:
      highly_sensitive:
        models: output/over80s/all/Inf/pfizer/covidadmitted/model*.rds
        data: output/over80s/all/Inf/pfizer/covidadmitted/data*.rds
      moderately_sensitive:
        weights: output/over80s/all/Inf/pfizer/covidadmitted/weights*

  report_ipw_over80s_all_Inf_pfizer_covidadmitted:
    run: r:latest analysis/R/dose_1/report_ipw.R over80s all Inf pfizer covidadmitted
    needs:
    - design
    - model_over80s_all_Inf_pfizer_covidadmitted
    outputs:
      highly_sensitive:
        broom: output/over80s/all/Inf/pfizer/covidadmitted/broom*.rds
      moderately_sensitive:
        data: output/over80s/all/Inf/pfizer/covidadmitted/broom*.csv

  report_msm_over80s_all_Inf_pfizer_covidadmitted:
    run: r:latest analysis/R/dose_1/report_msm.R over80s all Inf pfizer covidadmitted
    needs:
    - design
    - model_over80s_all_Inf_pfizer_covidadmitted
    outputs:
      moderately_sensitive:
        svg: output/over80s/all/Inf/pfizer/covidadmitted/VE_plot.svg
        png: output/over80s/all/Inf/pfizer/covidadmitted/VE_plot.png
        tables: output/over80s/all/Inf/pfizer/covidadmitted/estimates*.csv

  report_incidence_over80s_all_Inf_pfizer_covidadmitted:
    run: r:latest analysis/R/dose_1/report_incidence.R over80s all Inf pfizer covidadmitted
    needs:
    - design
    - model_over80s_all_Inf_pfizer_covidadmitted
    outputs:
      highly_sensitive:
        data: output/over80s/all/Inf/pfizer/covidadmitted/data_incidence.rds
      moderately_sensitive:
        cmlsvg: output/over80s/all/Inf/pfizer/covidadmitted/cml_incidence*.svg
        cmlpng: output/over80s/all/Inf/pfizer/covidadmitted/cml_incidence*.png
        trendsvg: output/over80s/all/Inf/pfizer/covidadmitted/time*.svg
        trendpng: output/over80s/all/Inf/pfizer/covidadmitted/time*.png

  model_over80s_all_Inf_az_covidadmitted:
    run: r:latest analysis/R/dose_1/model_msm.R over80s all Inf az covidadmitted 150000
      50000
    needs:
    - design
    - data_stset_over80s
    outputs:
      highly_sensitive:
        models: output/over80s/all/Inf/az/covidadmitted/model*.rds
        data: output/over80s/all/Inf/az/covidadmitted/data*.rds
      moderately_sensitive:
        weights: output/over80s/all/Inf/az/covidadmitted/weights*

  report_ipw_over80s_all_Inf_az_covidadmitted:
    run: r:latest analysis/R/dose_1/report_ipw.R over80s all Inf az covidadmitted
    needs:
    - design
    - model_over80s_all_Inf_az_covidadmitted
    outputs:
      highly_sensitive:
        broom: output/over80s/all/Inf/az/covidadmitted/broom*.rds
      moderately_sensitive:
        data: output/over80s/all/Inf/az/covidadmitted/broom*.csv

  report_msm_over80s_all_Inf_az_covidadmitted:
    run: r:latest analysis/R/dose_1/report_msm.R over80s all Inf az covidadmitted
    needs:
    - design
    - model_over80s_all_Inf_az_covidadmitted
    outputs:
      moderately_sensitive:
        svg: output/over80s/all/Inf/az/covidadmitted/VE_plot.svg
        png: output/over80s/all/Inf/az/covidadmitted/VE_plot.png
        tables: output/over80s/all/Inf/az/covidadmitted/estimates*.csv

  report_incidence_over80s_all_Inf_az_covidadmitted:
    run: r:latest analysis/R/dose_1/report_incidence.R over80s all Inf az covidadmitted
    needs:
    - design
    - model_over80s_all_Inf_az_covidadmitted
    outputs:
      highly_sensitive:
        data: output/over80s/all/Inf/az/covidadmitted/data_incidence.rds
      moderately_sensitive:
        cmlsvg: output/over80s/all/Inf/az/covidadmitted/cml_incidence*.svg
        cmlpng: output/over80s/all/Inf/az/covidadmitted/cml_incidence*.png
        trendsvg: output/over80s/all/Inf/az/covidadmitted/time*.svg
        trendpng: output/over80s/all/Inf/az/covidadmitted/time*.png

  model_over80s_all_Inf_any_coviddeath:
    run: r:latest analysis/R/dose_1/model_msm.R over80s all Inf any coviddeath 150000
      50000
    needs:
    - design
    - data_stset_over80s
    outputs:
      highly_sensitive:
        models: output/over80s/all/Inf/any/coviddeath/model*.rds
        data: output/over80s/all/Inf/any/coviddeath/data*.rds
      moderately_sensitive:
        weights: output/over80s/all/Inf/any/coviddeath/weights*

  report_ipw_over80s_all_Inf_any_coviddeath:
    run: r:latest analysis/R/dose_1/report_ipw.R over80s all Inf any coviddeath
    needs:
    - design
    - model_over80s_all_Inf_any_coviddeath
    outputs:
      highly_sensitive:
        broom: output/over80s/all/Inf/any/coviddeath/broom*.rds
      moderately_sensitive:
        data: output/over80s/all/Inf/any/coviddeath/broom*.csv

  report_msm_over80s_all_Inf_any_coviddeath:
    run: r:latest analysis/R/dose_1/report_msm.R over80s all Inf any coviddeath
    needs:
    - design
    - model_over80s_all_Inf_any_coviddeath
    outputs:
      moderately_sensitive:
        svg: output/over80s/all/Inf/any/coviddeath/VE_plot.svg
        png: output/over80s/all/Inf/any/coviddeath/VE_plot.png
        tables: output/over80s/all/Inf/any/coviddeath/estimates*.csv

  report_incidence_over80s_all_Inf_any_coviddeath:
    run: r:latest analysis/R/dose_1/report_incidence.R over80s all Inf any coviddeath
    needs:
    - design
    - model_over80s_all_Inf_any_coviddeath
    outputs:
      highly_sensitive:
        data: output/over80s/all/Inf/any/coviddeath/data_incidence.rds
      moderately_sensitive:
        cmlsvg: output/over80s/all/Inf/any/coviddeath/cml_incidence*.svg
        cmlpng: output/over80s/all/Inf/any/coviddeath/cml_incidence*.png
        trendsvg: output/over80s/all/Inf/any/coviddeath/time*.svg
        trendpng: output/over80s/all/Inf/any/coviddeath/time*.png

  model_over80s_all_Inf_pfizer_coviddeath:
    run: r:latest analysis/R/dose_1/model_msm.R over80s all Inf pfizer coviddeath
      150000 50000
    needs:
    - design
    - data_stset_over80s
    outputs:
      highly_sensitive:
        models: output/over80s/all/Inf/pfizer/coviddeath/model*.rds
        data: output/over80s/all/Inf/pfizer/coviddeath/data*.rds
      moderately_sensitive:
        weights: output/over80s/all/Inf/pfizer/coviddeath/weights*

  report_ipw_over80s_all_Inf_pfizer_coviddeath:
    run: r:latest analysis/R/dose_1/report_ipw.R over80s all Inf pfizer coviddeath
    needs:
    - design
    - model_over80s_all_Inf_pfizer_coviddeath
    outputs:
      highly_sensitive:
        broom: output/over80s/all/Inf/pfizer/coviddeath/broom*.rds
      moderately_sensitive:
        data: output/over80s/all/Inf/pfizer/coviddeath/broom*.csv

  report_msm_over80s_all_Inf_pfizer_coviddeath:
    run: r:latest analysis/R/dose_1/report_msm.R over80s all Inf pfizer coviddeath
    needs:
    - design
    - model_over80s_all_Inf_pfizer_coviddeath
    outputs:
      moderately_sensitive:
        svg: output/over80s/all/Inf/pfizer/coviddeath/VE_plot.svg
        png: output/over80s/all/Inf/pfizer/coviddeath/VE_plot.png
        tables: output/over80s/all/Inf/pfizer/coviddeath/estimates*.csv

  report_incidence_over80s_all_Inf_pfizer_coviddeath:
    run: r:latest analysis/R/dose_1/report_incidence.R over80s all Inf pfizer coviddeath
    needs:
    - design
    - model_over80s_all_Inf_pfizer_coviddeath
    outputs:
      highly_sensitive:
        data: output/over80s/all/Inf/pfizer/coviddeath/data_incidence.rds
      moderately_sensitive:
        cmlsvg: output/over80s/all/Inf/pfizer/coviddeath/cml_incidence*.svg
        cmlpng: output/over80s/all/Inf/pfizer/coviddeath/cml_incidence*.png
        trendsvg: output/over80s/all/Inf/pfizer/coviddeath/time*.svg
        trendpng: output/over80s/all/Inf/pfizer/coviddeath/time*.png

  model_over80s_all_Inf_az_coviddeath:
    run: r:latest analysis/R/dose_1/model_msm.R over80s all Inf az coviddeath 150000
      50000
    needs:
    - design
    - data_stset_over80s
    outputs:
      highly_sensitive:
        models: output/over80s/all/Inf/az/coviddeath/model*.rds
        data: output/over80s/all/Inf/az/coviddeath/data*.rds
      moderately_sensitive:
        weights: output/over80s/all/Inf/az/coviddeath/weights*

  report_ipw_over80s_all_Inf_az_coviddeath:
    run: r:latest analysis/R/dose_1/report_ipw.R over80s all Inf az coviddeath
    needs:
    - design
    - model_over80s_all_Inf_az_coviddeath
    outputs:
      highly_sensitive:
        broom: output/over80s/all/Inf/az/coviddeath/broom*.rds
      moderately_sensitive:
        data: output/over80s/all/Inf/az/coviddeath/broom*.csv

  report_msm_over80s_all_Inf_az_coviddeath:
    run: r:latest analysis/R/dose_1/report_msm.R over80s all Inf az coviddeath
    needs:
    - design
    - model_over80s_all_Inf_az_coviddeath
    outputs:
      moderately_sensitive:
        svg: output/over80s/all/Inf/az/coviddeath/VE_plot.svg
        png: output/over80s/all/Inf/az/coviddeath/VE_plot.png
        tables: output/over80s/all/Inf/az/coviddeath/estimates*.csv

  report_incidence_over80s_all_Inf_az_coviddeath:
    run: r:latest analysis/R/dose_1/report_incidence.R over80s all Inf az coviddeath
    needs:
    - design
    - model_over80s_all_Inf_az_coviddeath
    outputs:
      highly_sensitive:
        data: output/over80s/all/Inf/az/coviddeath/data_incidence.rds
      moderately_sensitive:
        cmlsvg: output/over80s/all/Inf/az/coviddeath/cml_incidence*.svg
        cmlpng: output/over80s/all/Inf/az/coviddeath/cml_incidence*.png
        trendsvg: output/over80s/all/Inf/az/coviddeath/time*.svg
        trendpng: output/over80s/all/Inf/az/coviddeath/time*.png

  model_over80s_all_Inf_any_noncoviddeath:
    run: r:latest analysis/R/dose_1/model_msm.R over80s all Inf any noncoviddeath
      150000 50000
    needs:
    - design
    - data_stset_over80s
    outputs:
      highly_sensitive:
        models: output/over80s/all/Inf/any/noncoviddeath/model*.rds
        data: output/over80s/all/Inf/any/noncoviddeath/data*.rds
      moderately_sensitive:
        weights: output/over80s/all/Inf/any/noncoviddeath/weights*

  report_ipw_over80s_all_Inf_any_noncoviddeath:
    run: r:latest analysis/R/dose_1/report_ipw.R over80s all Inf any noncoviddeath
    needs:
    - design
    - model_over80s_all_Inf_any_noncoviddeath
    outputs:
      highly_sensitive:
        broom: output/over80s/all/Inf/any/noncoviddeath/broom*.rds
      moderately_sensitive:
        data: output/over80s/all/Inf/any/noncoviddeath/broom*.csv

  report_msm_over80s_all_Inf_any_noncoviddeath:
    run: r:latest analysis/R/dose_1/report_msm.R over80s all Inf any noncoviddeath
    needs:
    - design
    - model_over80s_all_Inf_any_noncoviddeath
    outputs:
      moderately_sensitive:
        svg: output/over80s/all/Inf/any/noncoviddeath/VE_plot.svg
        png: output/over80s/all/Inf/any/noncoviddeath/VE_plot.png
        tables: output/over80s/all/Inf/any/noncoviddeath/estimates*.csv

  report_incidence_over80s_all_Inf_any_noncoviddeath:
    run: r:latest analysis/R/dose_1/report_incidence.R over80s all Inf any noncoviddeath
    needs:
    - design
    - model_over80s_all_Inf_any_noncoviddeath
    outputs:
      highly_sensitive:
        data: output/over80s/all/Inf/any/noncoviddeath/data_incidence.rds
      moderately_sensitive:
        cmlsvg: output/over80s/all/Inf/any/noncoviddeath/cml_incidence*.svg
        cmlpng: output/over80s/all/Inf/any/noncoviddeath/cml_incidence*.png
        trendsvg: output/over80s/all/Inf/any/noncoviddeath/time*.svg
        trendpng: output/over80s/all/Inf/any/noncoviddeath/time*.png

  model_over80s_all_Inf_pfizer_noncoviddeath:
    run: r:latest analysis/R/dose_1/model_msm.R over80s all Inf pfizer noncoviddeath
      150000 50000
    needs:
    - design
    - data_stset_over80s
    outputs:
      highly_sensitive:
        models: output/over80s/all/Inf/pfizer/noncoviddeath/model*.rds
        data: output/over80s/all/Inf/pfizer/noncoviddeath/data*.rds
      moderately_sensitive:
        weights: output/over80s/all/Inf/pfizer/noncoviddeath/weights*

  report_ipw_over80s_all_Inf_pfizer_noncoviddeath:
    run: r:latest analysis/R/dose_1/report_ipw.R over80s all Inf pfizer noncoviddeath
    needs:
    - design
    - model_over80s_all_Inf_pfizer_noncoviddeath
    outputs:
      highly_sensitive:
        broom: output/over80s/all/Inf/pfizer/noncoviddeath/broom*.rds
      moderately_sensitive:
        data: output/over80s/all/Inf/pfizer/noncoviddeath/broom*.csv

  report_msm_over80s_all_Inf_pfizer_noncoviddeath:
    run: r:latest analysis/R/dose_1/report_msm.R over80s all Inf pfizer noncoviddeath
    needs:
    - design
    - model_over80s_all_Inf_pfizer_noncoviddeath
    outputs:
      moderately_sensitive:
        svg: output/over80s/all/Inf/pfizer/noncoviddeath/VE_plot.svg
        png: output/over80s/all/Inf/pfizer/noncoviddeath/VE_plot.png
        tables: output/over80s/all/Inf/pfizer/noncoviddeath/estimates*.csv

  report_incidence_over80s_all_Inf_pfizer_noncoviddeath:
    run: r:latest analysis/R/dose_1/report_incidence.R over80s all Inf pfizer noncoviddeath
    needs:
    - design
    - model_over80s_all_Inf_pfizer_noncoviddeath
    outputs:
      highly_sensitive:
        data: output/over80s/all/Inf/pfizer/noncoviddeath/data_incidence.rds
      moderately_sensitive:
        cmlsvg: output/over80s/all/Inf/pfizer/noncoviddeath/cml_incidence*.svg
        cmlpng: output/over80s/all/Inf/pfizer/noncoviddeath/cml_incidence*.png
        trendsvg: output/over80s/all/Inf/pfizer/noncoviddeath/time*.svg
        trendpng: output/over80s/all/Inf/pfizer/noncoviddeath/time*.png

  model_over80s_all_Inf_az_noncoviddeath:
    run: r:latest analysis/R/dose_1/model_msm.R over80s all Inf az noncoviddeath 150000
      50000
    needs:
    - design
    - data_stset_over80s
    outputs:
      highly_sensitive:
        models: output/over80s/all/Inf/az/noncoviddeath/model*.rds
        data: output/over80s/all/Inf/az/noncoviddeath/data*.rds
      moderately_sensitive:
        weights: output/over80s/all/Inf/az/noncoviddeath/weights*

  report_ipw_over80s_all_Inf_az_noncoviddeath:
    run: r:latest analysis/R/dose_1/report_ipw.R over80s all Inf az noncoviddeath
    needs:
    - design
    - model_over80s_all_Inf_az_noncoviddeath
    outputs:
      highly_sensitive:
        broom: output/over80s/all/Inf/az/noncoviddeath/broom*.rds
      moderately_sensitive:
        data: output/over80s/all/Inf/az/noncoviddeath/broom*.csv

  report_msm_over80s_all_Inf_az_noncoviddeath:
    run: r:latest analysis/R/dose_1/report_msm.R over80s all Inf az noncoviddeath
    needs:
    - design
    - model_over80s_all_Inf_az_noncoviddeath
    outputs:
      moderately_sensitive:
        svg: output/over80s/all/Inf/az/noncoviddeath/VE_plot.svg
        png: output/over80s/all/Inf/az/noncoviddeath/VE_plot.png
        tables: output/over80s/all/Inf/az/noncoviddeath/estimates*.csv

  report_incidence_over80s_all_Inf_az_noncoviddeath:
    run: r:latest analysis/R/dose_1/report_incidence.R over80s all Inf az noncoviddeath
    needs:
    - design
    - model_over80s_all_Inf_az_noncoviddeath
    outputs:
      highly_sensitive:
        data: output/over80s/all/Inf/az/noncoviddeath/data_incidence.rds
      moderately_sensitive:
        cmlsvg: output/over80s/all/Inf/az/noncoviddeath/cml_incidence*.svg
        cmlpng: output/over80s/all/Inf/az/noncoviddeath/cml_incidence*.png
        trendsvg: output/over80s/all/Inf/az/noncoviddeath/time*.svg
        trendpng: output/over80s/all/Inf/az/noncoviddeath/time*.png

  model_over80s_all_Inf_any_death:
    run: r:latest analysis/R/dose_1/model_msm.R over80s all Inf any death 150000 50000
    needs:
    - design
    - data_stset_over80s
    outputs:
      highly_sensitive:
        models: output/over80s/all/Inf/any/death/model*.rds
        data: output/over80s/all/Inf/any/death/data*.rds
      moderately_sensitive:
        weights: output/over80s/all/Inf/any/death/weights*

  report_ipw_over80s_all_Inf_any_death:
    run: r:latest analysis/R/dose_1/report_ipw.R over80s all Inf any death
    needs:
    - design
    - model_over80s_all_Inf_any_death
    outputs:
      highly_sensitive:
        broom: output/over80s/all/Inf/any/death/broom*.rds
      moderately_sensitive:
        data: output/over80s/all/Inf/any/death/broom*.csv

  report_msm_over80s_all_Inf_any_death:
    run: r:latest analysis/R/dose_1/report_msm.R over80s all Inf any death
    needs:
    - design
    - model_over80s_all_Inf_any_death
    outputs:
      moderately_sensitive:
        svg: output/over80s/all/Inf/any/death/VE_plot.svg
        png: output/over80s/all/Inf/any/death/VE_plot.png
        tables: output/over80s/all/Inf/any/death/estimates*.csv

  report_incidence_over80s_all_Inf_any_death:
    run: r:latest analysis/R/dose_1/report_incidence.R over80s all Inf any death
    needs:
    - design
    - model_over80s_all_Inf_any_death
    outputs:
      highly_sensitive:
        data: output/over80s/all/Inf/any/death/data_incidence.rds
      moderately_sensitive:
        cmlsvg: output/over80s/all/Inf/any/death/cml_incidence*.svg
        cmlpng: output/over80s/all/Inf/any/death/cml_incidence*.png
        trendsvg: output/over80s/all/Inf/any/death/time*.svg
        trendpng: output/over80s/all/Inf/any/death/time*.png

  model_over80s_all_Inf_pfizer_death:
    run: r:latest analysis/R/dose_1/model_msm.R over80s all Inf pfizer death 150000
      50000
    needs:
    - design
    - data_stset_over80s
    outputs:
      highly_sensitive:
        models: output/over80s/all/Inf/pfizer/death/model*.rds
        data: output/over80s/all/Inf/pfizer/death/data*.rds
      moderately_sensitive:
        weights: output/over80s/all/Inf/pfizer/death/weights*

  report_ipw_over80s_all_Inf_pfizer_death:
    run: r:latest analysis/R/dose_1/report_ipw.R over80s all Inf pfizer death
    needs:
    - design
    - model_over80s_all_Inf_pfizer_death
    outputs:
      highly_sensitive:
        broom: output/over80s/all/Inf/pfizer/death/broom*.rds
      moderately_sensitive:
        data: output/over80s/all/Inf/pfizer/death/broom*.csv

  report_msm_over80s_all_Inf_pfizer_death:
    run: r:latest analysis/R/dose_1/report_msm.R over80s all Inf pfizer death
    needs:
    - design
    - model_over80s_all_Inf_pfizer_death
    outputs:
      moderately_sensitive:
        svg: output/over80s/all/Inf/pfizer/death/VE_plot.svg
        png: output/over80s/all/Inf/pfizer/death/VE_plot.png
        tables: output/over80s/all/Inf/pfizer/death/estimates*.csv

  report_incidence_over80s_all_Inf_pfizer_death:
    run: r:latest analysis/R/dose_1/report_incidence.R over80s all Inf pfizer death
    needs:
    - design
    - model_over80s_all_Inf_pfizer_death
    outputs:
      highly_sensitive:
        data: output/over80s/all/Inf/pfizer/death/data_incidence.rds
      moderately_sensitive:
        cmlsvg: output/over80s/all/Inf/pfizer/death/cml_incidence*.svg
        cmlpng: output/over80s/all/Inf/pfizer/death/cml_incidence*.png
        trendsvg: output/over80s/all/Inf/pfizer/death/time*.svg
        trendpng: output/over80s/all/Inf/pfizer/death/time*.png

  model_over80s_all_Inf_az_death:
    run: r:latest analysis/R/dose_1/model_msm.R over80s all Inf az death 150000 50000
    needs:
    - design
    - data_stset_over80s
    outputs:
      highly_sensitive:
        models: output/over80s/all/Inf/az/death/model*.rds
        data: output/over80s/all/Inf/az/death/data*.rds
      moderately_sensitive:
        weights: output/over80s/all/Inf/az/death/weights*

  report_ipw_over80s_all_Inf_az_death:
    run: r:latest analysis/R/dose_1/report_ipw.R over80s all Inf az death
    needs:
    - design
    - model_over80s_all_Inf_az_death
    outputs:
      highly_sensitive:
        broom: output/over80s/all/Inf/az/death/broom*.rds
      moderately_sensitive:
        data: output/over80s/all/Inf/az/death/broom*.csv

  report_msm_over80s_all_Inf_az_death:
    run: r:latest analysis/R/dose_1/report_msm.R over80s all Inf az death
    needs:
    - design
    - model_over80s_all_Inf_az_death
    outputs:
      moderately_sensitive:
        svg: output/over80s/all/Inf/az/death/VE_plot.svg
        png: output/over80s/all/Inf/az/death/VE_plot.png
        tables: output/over80s/all/Inf/az/death/estimates*.csv

  report_incidence_over80s_all_Inf_az_death:
    run: r:latest analysis/R/dose_1/report_incidence.R over80s all Inf az death
    needs:
    - design
    - model_over80s_all_Inf_az_death
    outputs:
      highly_sensitive:
        data: output/over80s/all/Inf/az/death/data_incidence.rds
      moderately_sensitive:
        cmlsvg: output/over80s/all/Inf/az/death/cml_incidence*.svg
        cmlpng: output/over80s/all/Inf/az/death/cml_incidence*.png
        trendsvg: output/over80s/all/Inf/az/death/time*.svg
        trendpng: output/over80s/all/Inf/az/death/time*.png

  report_ipw_over80s_all_Inf:
    run: r:latest analysis/R/dose_1/report_ipw_combined.R over80s all Inf death
    needs:
    - design
    - report_ipw_over80s_all_Inf_any_death
    - report_ipw_over80s_all_Inf_pfizer_death
    - report_ipw_over80s_all_Inf_az_death
    outputs:
      moderately_sensitive:
        svg: output/over80s/all/Inf/combined/plot_vax1.svg
        csv: output/over80s/all/Inf/combined/tab_vax1.csv
        csv_wide: output/over80s/all/Inf/combined/tab_vax1_wide.csv

  report_msm_over80s_all_Inf:
    run: r:latest analysis/R/dose_1/report_msm_combined.R over80s all Inf
    needs:
    - design
    - report_msm_over80s_all_Inf_any_postest
    - report_msm_over80s_all_Inf_any_covidadmitted
    - report_msm_over80s_all_Inf_any_coviddeath
    - report_msm_over80s_all_Inf_any_noncoviddeath
    - report_msm_over80s_all_Inf_any_death
    - report_msm_over80s_all_Inf_pfizer_postest
    - report_msm_over80s_all_Inf_pfizer_covidadmitted
    - report_msm_over80s_all_Inf_pfizer_coviddeath
    - report_msm_over80s_all_Inf_pfizer_noncoviddeath
    - report_msm_over80s_all_Inf_pfizer_death
    - report_msm_over80s_all_Inf_az_postest
    - report_msm_over80s_all_Inf_az_covidadmitted
    - report_msm_over80s_all_Inf_az_coviddeath
    - report_msm_over80s_all_Inf_az_noncoviddeath
    - report_msm_over80s_all_Inf_az_death
    outputs:
      moderately_sensitive:
        svg: output/over80s/all/Inf/combined/VE*.svg
        png: output/over80s/all/Inf/combined/VE*.png
        csv: output/over80s/all/Inf/combined/*.csv

  report_incidence_over80s_all_Inf:
    run: r:latest analysis/R/dose_1/report_incidence_combined.R over80s all Inf
    needs:
    - design
    - report_incidence_over80s_all_Inf_any_postest
    - report_incidence_over80s_all_Inf_any_covidadmitted
    - report_incidence_over80s_all_Inf_any_coviddeath
    - report_incidence_over80s_all_Inf_any_noncoviddeath
    - report_incidence_over80s_all_Inf_any_death
    - report_incidence_over80s_all_Inf_pfizer_postest
    - report_incidence_over80s_all_Inf_pfizer_covidadmitted
    - report_incidence_over80s_all_Inf_pfizer_coviddeath
    - report_incidence_over80s_all_Inf_pfizer_noncoviddeath
    - report_incidence_over80s_all_Inf_pfizer_death
    - report_incidence_over80s_all_Inf_az_postest
    - report_incidence_over80s_all_Inf_az_covidadmitted
    - report_incidence_over80s_all_Inf_az_coviddeath
    - report_incidence_over80s_all_Inf_az_noncoviddeath
    - report_incidence_over80s_all_Inf_az_death
    outputs:
      moderately_sensitive:
        svg: output/over80s/all/Inf/combined/cml_incidence*.svg
        png: output/over80s/all/Inf/combined/cml_incidence*.png

  ## #################################### 
  ## in70s 
  ## #################################### 

  extract_in70s:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_in70s
      --output-format feather
    outputs:
      highly_sensitive:
        cohort: output/input_in70s.feather

  data_process_in70s:
    run: r:latest analysis/R/data_process.R in70s
    needs:
    - extract_in70s
    outputs:
      highly_sensitive:
        data: output/in70s/data/data_processed.rds
        datavaxlong: output/in70s/data/data_long_vax_dates.rds
        datavaxwide: output/in70s/data/data_wide_vax_dates.rds

  data_process_long_in70s:
    run: r:latest analysis/R/data_process_long.R in70s
    needs:
    - data_process_in70s
    outputs:
      highly_sensitive:
        data2: output/in70s/data/data_long_admission_dates.rds
        data3: output/in70s/data/data_long_admission_infectious_dates.rds
        data4: output/in70s/data/data_long_admission_noninfectious_dates.rds
        data5: output/in70s/data/data_long_pr_probable_covid_dates.rds
        data6: output/in70s/data/data_long_pr_suspected_covid_dates.rds
        data7: output/in70s/data/data_long_postest_dates.rds

  data_properties_in70s:
    run: r:latest analysis/R/data_properties.R output/in70s/data/data_processed.rds
      output/in70s/data_properties
    needs:
    - data_process_in70s
    outputs:
      moderately_sensitive:
        txt: output/in70s/data_properties/data_processed*.txt

  data_selection_in70s:
    run: r:latest analysis/R/data_selection.R in70s
    needs:
    - data_process_in70s
    outputs:
      highly_sensitive:
        cohort: output/in70s/data/data_cohort.rds
      moderately_sensitive:
        flow: output/in70s/data/flowchart.csv

  data_stset_in70s:
    run: r:latest analysis/R/data_stset.R in70s
    needs:
    - design
    - data_selection_in70s
    - data_process_long_in70s
    outputs:
      highly_sensitive:
        fixed: output/in70s/data/data_fixed.rds
        tte: output/in70s/data/data_tte.rds
        pt: output/in70s/data/data_pt.rds

  data_samples_in70s:
    run: r:latest analysis/R/data_samples.R in70s 0.05
    needs:
    - design
    - data_stset_in70s
    outputs:
      highly_sensitive:
        data: output/in70s/data/data_samples.rds

  check_ethnicity_in70s:
    run: r:latest analysis/R/check_ethnicity.R in70s
    needs:
    - data_process_in70s
    outputs:
      moderately_sensitive:
        tab: output/in70s/data/ethnicity_table*.txt

  descr_table1_in70s:
    run: r:latest analysis/R/descr_table1.R in70s
    needs:
    - design
    - data_selection_in70s
    outputs:
      highly_sensitive:
        rds: output/in70s/descriptive/tables/*.rds
      moderately_sensitive:
        html: output/in70s/descriptive/tables/table1.html

  descr_tableirrold_in70s:
    run: r:latest analysis/R/descr_tableirr.R in70s FALSE
    needs:
    - design
    - data_selection_in70s
    outputs:
      moderately_sensitive:
        html: output/in70s/descriptive/tables/table_irr_old.html
        csv: output/in70s/descriptive/tables/table_irr_old.csv

  descr_tableirr_in70s:
    run: r:latest analysis/R/descr_tableirr_lite.R in70s FALSE
    needs:
    - design
    - data_selection_in70s
    outputs:
      moderately_sensitive:
        html: output/in70s/descriptive/tables/table_irr.html
        csv: output/in70s/descriptive/tables/table_irr.csv

  descr_tableirr_exclude_in70s:
    run: r:latest analysis/R/descr_tableirr_lite.R in70s TRUE
    needs:
    - design
    - data_selection_in70s
    outputs:
      moderately_sensitive:
        html: output/in70s/descriptive/tables/table_irr_exclude_recentpostest.html
        csv: output/in70s/descriptive/tables/table_irr_exclude_recentpostest.csv

  descr_events_in70s:
    run: r:latest analysis/R/descr_events.R in70s
    needs:
    - design
    - data_stset_in70s
    outputs:
      highly_sensitive:
        rds: output/in70s/descriptive/plots/*.rds
      moderately_sensitive:
        plots: output/in70s/descriptive/plots/*.svg
        tables: output/in70s/descriptive/tables/*.csv

  ## #################################### 
  ## all 
  ## natural estimand 
  ## #################################### 

  descr_preflight_in70s_all_0:
    run: r:latest analysis/R/preflight.R in70s all 0 150000 50000
    needs:
    - design
    - data_stset_in70s
    outputs:
      moderately_sensitive:
        html: output/in70s/descriptive/model-checks/all/0/*.html
        csv: output/in70s/descriptive/model-checks/all/0/*.csv

  model_in70s_all_0_any_postest:
    run: r:latest analysis/R/dose_1/model_msm.R in70s all 0 any postest 150000 50000
    needs:
    - design
    - data_stset_in70s
    outputs:
      highly_sensitive:
        models: output/in70s/all/0/any/postest/model*.rds
        data: output/in70s/all/0/any/postest/data*.rds
      moderately_sensitive:
        weights: output/in70s/all/0/any/postest/weights*

  report_ipw_in70s_all_0_any_postest:
    run: r:latest analysis/R/dose_1/report_ipw.R in70s all 0 any postest
    needs:
    - design
    - model_in70s_all_0_any_postest
    outputs:
      highly_sensitive:
        broom: output/in70s/all/0/any/postest/broom*.rds
      moderately_sensitive:
        data: output/in70s/all/0/any/postest/broom*.csv

  report_msm_in70s_all_0_any_postest:
    run: r:latest analysis/R/dose_1/report_msm.R in70s all 0 any postest
    needs:
    - design
    - model_in70s_all_0_any_postest
    outputs:
      moderately_sensitive:
        svg: output/in70s/all/0/any/postest/VE_plot.svg
        png: output/in70s/all/0/any/postest/VE_plot.png
        tables: output/in70s/all/0/any/postest/estimates*.csv

  report_incidence_in70s_all_0_any_postest:
    run: r:latest analysis/R/dose_1/report_incidence.R in70s all 0 any postest
    needs:
    - design
    - model_in70s_all_0_any_postest
    outputs:
      highly_sensitive:
        data: output/in70s/all/0/any/postest/data_incidence.rds
      moderately_sensitive:
        cmlsvg: output/in70s/all/0/any/postest/cml_incidence*.svg
        cmlpng: output/in70s/all/0/any/postest/cml_incidence*.png
        trendsvg: output/in70s/all/0/any/postest/time*.svg
        trendpng: output/in70s/all/0/any/postest/time*.png

  model_in70s_all_0_pfizer_postest:
    run: r:latest analysis/R/dose_1/model_msm.R in70s all 0 pfizer postest 150000
      50000
    needs:
    - design
    - data_stset_in70s
    outputs:
      highly_sensitive:
        models: output/in70s/all/0/pfizer/postest/model*.rds
        data: output/in70s/all/0/pfizer/postest/data*.rds
      moderately_sensitive:
        weights: output/in70s/all/0/pfizer/postest/weights*

  report_ipw_in70s_all_0_pfizer_postest:
    run: r:latest analysis/R/dose_1/report_ipw.R in70s all 0 pfizer postest
    needs:
    - design
    - model_in70s_all_0_pfizer_postest
    outputs:
      highly_sensitive:
        broom: output/in70s/all/0/pfizer/postest/broom*.rds
      moderately_sensitive:
        data: output/in70s/all/0/pfizer/postest/broom*.csv

  report_msm_in70s_all_0_pfizer_postest:
    run: r:latest analysis/R/dose_1/report_msm.R in70s all 0 pfizer postest
    needs:
    - design
    - model_in70s_all_0_pfizer_postest
    outputs:
      moderately_sensitive:
        svg: output/in70s/all/0/pfizer/postest/VE_plot.svg
        png: output/in70s/all/0/pfizer/postest/VE_plot.png
        tables: output/in70s/all/0/pfizer/postest/estimates*.csv

  report_incidence_in70s_all_0_pfizer_postest:
    run: r:latest analysis/R/dose_1/report_incidence.R in70s all 0 pfizer postest
    needs:
    - design
    - model_in70s_all_0_pfizer_postest
    outputs:
      highly_sensitive:
        data: output/in70s/all/0/pfizer/postest/data_incidence.rds
      moderately_sensitive:
        cmlsvg: output/in70s/all/0/pfizer/postest/cml_incidence*.svg
        cmlpng: output/in70s/all/0/pfizer/postest/cml_incidence*.png
        trendsvg: output/in70s/all/0/pfizer/postest/time*.svg
        trendpng: output/in70s/all/0/pfizer/postest/time*.png

  model_in70s_all_0_az_postest:
    run: r:latest analysis/R/dose_1/model_msm.R in70s all 0 az postest 150000 50000
    needs:
    - design
    - data_stset_in70s
    outputs:
      highly_sensitive:
        models: output/in70s/all/0/az/postest/model*.rds
        data: output/in70s/all/0/az/postest/data*.rds
      moderately_sensitive:
        weights: output/in70s/all/0/az/postest/weights*

  report_ipw_in70s_all_0_az_postest:
    run: r:latest analysis/R/dose_1/report_ipw.R in70s all 0 az postest
    needs:
    - design
    - model_in70s_all_0_az_postest
    outputs:
      highly_sensitive:
        broom: output/in70s/all/0/az/postest/broom*.rds
      moderately_sensitive:
        data: output/in70s/all/0/az/postest/broom*.csv

  report_msm_in70s_all_0_az_postest:
    run: r:latest analysis/R/dose_1/report_msm.R in70s all 0 az postest
    needs:
    - design
    - model_in70s_all_0_az_postest
    outputs:
      moderately_sensitive:
        svg: output/in70s/all/0/az/postest/VE_plot.svg
        png: output/in70s/all/0/az/postest/VE_plot.png
        tables: output/in70s/all/0/az/postest/estimates*.csv

  report_incidence_in70s_all_0_az_postest:
    run: r:latest analysis/R/dose_1/report_incidence.R in70s all 0 az postest
    needs:
    - design
    - model_in70s_all_0_az_postest
    outputs:
      highly_sensitive:
        data: output/in70s/all/0/az/postest/data_incidence.rds
      moderately_sensitive:
        cmlsvg: output/in70s/all/0/az/postest/cml_incidence*.svg
        cmlpng: output/in70s/all/0/az/postest/cml_incidence*.png
        trendsvg: output/in70s/all/0/az/postest/time*.svg
        trendpng: output/in70s/all/0/az/postest/time*.png

  model_in70s_all_0_any_covidadmitted:
    run: r:latest analysis/R/dose_1/model_msm.R in70s all 0 any covidadmitted 150000
      50000
    needs:
    - design
    - data_stset_in70s
    outputs:
      highly_sensitive:
        models: output/in70s/all/0/any/covidadmitted/model*.rds
        data: output/in70s/all/0/any/covidadmitted/data*.rds
      moderately_sensitive:
        weights: output/in70s/all/0/any/covidadmitted/weights*

  report_ipw_in70s_all_0_any_covidadmitted:
    run: r:latest analysis/R/dose_1/report_ipw.R in70s all 0 any covidadmitted
    needs:
    - design
    - model_in70s_all_0_any_covidadmitted
    outputs:
      highly_sensitive:
        broom: output/in70s/all/0/any/covidadmitted/broom*.rds
      moderately_sensitive:
        data: output/in70s/all/0/any/covidadmitted/broom*.csv

  report_msm_in70s_all_0_any_covidadmitted:
    run: r:latest analysis/R/dose_1/report_msm.R in70s all 0 any covidadmitted
    needs:
    - design
    - model_in70s_all_0_any_covidadmitted
    outputs:
      moderately_sensitive:
        svg: output/in70s/all/0/any/covidadmitted/VE_plot.svg
        png: output/in70s/all/0/any/covidadmitted/VE_plot.png
        tables: output/in70s/all/0/any/covidadmitted/estimates*.csv

  report_incidence_in70s_all_0_any_covidadmitted:
    run: r:latest analysis/R/dose_1/report_incidence.R in70s all 0 any covidadmitted
    needs:
    - design
    - model_in70s_all_0_any_covidadmitted
    outputs:
      highly_sensitive:
        data: output/in70s/all/0/any/covidadmitted/data_incidence.rds
      moderately_sensitive:
        cmlsvg: output/in70s/all/0/any/covidadmitted/cml_incidence*.svg
        cmlpng: output/in70s/all/0/any/covidadmitted/cml_incidence*.png
        trendsvg: output/in70s/all/0/any/covidadmitted/time*.svg
        trendpng: output/in70s/all/0/any/covidadmitted/time*.png

  model_in70s_all_0_pfizer_covidadmitted:
    run: r:latest analysis/R/dose_1/model_msm.R in70s all 0 pfizer covidadmitted 150000
      50000
    needs:
    - design
    - data_stset_in70s
    outputs:
      highly_sensitive:
        models: output/in70s/all/0/pfizer/covidadmitted/model*.rds
        data: output/in70s/all/0/pfizer/covidadmitted/data*.rds
      moderately_sensitive:
        weights: output/in70s/all/0/pfizer/covidadmitted/weights*

  report_ipw_in70s_all_0_pfizer_covidadmitted:
    run: r:latest analysis/R/dose_1/report_ipw.R in70s all 0 pfizer covidadmitted
    needs:
    - design
    - model_in70s_all_0_pfizer_covidadmitted
    outputs:
      highly_sensitive:
        broom: output/in70s/all/0/pfizer/covidadmitted/broom*.rds
      moderately_sensitive:
        data: output/in70s/all/0/pfizer/covidadmitted/broom*.csv

  report_msm_in70s_all_0_pfizer_covidadmitted:
    run: r:latest analysis/R/dose_1/report_msm.R in70s all 0 pfizer covidadmitted
    needs:
    - design
    - model_in70s_all_0_pfizer_covidadmitted
    outputs:
      moderately_sensitive:
        svg: output/in70s/all/0/pfizer/covidadmitted/VE_plot.svg
        png: output/in70s/all/0/pfizer/covidadmitted/VE_plot.png
        tables: output/in70s/all/0/pfizer/covidadmitted/estimates*.csv

  report_incidence_in70s_all_0_pfizer_covidadmitted:
    run: r:latest analysis/R/dose_1/report_incidence.R in70s all 0 pfizer covidadmitted
    needs:
    - design
    - model_in70s_all_0_pfizer_covidadmitted
    outputs:
      highly_sensitive:
        data: output/in70s/all/0/pfizer/covidadmitted/data_incidence.rds
      moderately_sensitive:
        cmlsvg: output/in70s/all/0/pfizer/covidadmitted/cml_incidence*.svg
        cmlpng: output/in70s/all/0/pfizer/covidadmitted/cml_incidence*.png
        trendsvg: output/in70s/all/0/pfizer/covidadmitted/time*.svg
        trendpng: output/in70s/all/0/pfizer/covidadmitted/time*.png

  model_in70s_all_0_az_covidadmitted:
    run: r:latest analysis/R/dose_1/model_msm.R in70s all 0 az covidadmitted 150000
      50000
    needs:
    - design
    - data_stset_in70s
    outputs:
      highly_sensitive:
        models: output/in70s/all/0/az/covidadmitted/model*.rds
        data: output/in70s/all/0/az/covidadmitted/data*.rds
      moderately_sensitive:
        weights: output/in70s/all/0/az/covidadmitted/weights*

  report_ipw_in70s_all_0_az_covidadmitted:
    run: r:latest analysis/R/dose_1/report_ipw.R in70s all 0 az covidadmitted
    needs:
    - design
    - model_in70s_all_0_az_covidadmitted
    outputs:
      highly_sensitive:
        broom: output/in70s/all/0/az/covidadmitted/broom*.rds
      moderately_sensitive:
        data: output/in70s/all/0/az/covidadmitted/broom*.csv

  report_msm_in70s_all_0_az_covidadmitted:
    run: r:latest analysis/R/dose_1/report_msm.R in70s all 0 az covidadmitted
    needs:
    - design
    - model_in70s_all_0_az_covidadmitted
    outputs:
      moderately_sensitive:
        svg: output/in70s/all/0/az/covidadmitted/VE_plot.svg
        png: output/in70s/all/0/az/covidadmitted/VE_plot.png
        tables: output/in70s/all/0/az/covidadmitted/estimates*.csv

  report_incidence_in70s_all_0_az_covidadmitted:
    run: r:latest analysis/R/dose_1/report_incidence.R in70s all 0 az covidadmitted
    needs:
    - design
    - model_in70s_all_0_az_covidadmitted
    outputs:
      highly_sensitive:
        data: output/in70s/all/0/az/covidadmitted/data_incidence.rds
      moderately_sensitive:
        cmlsvg: output/in70s/all/0/az/covidadmitted/cml_incidence*.svg
        cmlpng: output/in70s/all/0/az/covidadmitted/cml_incidence*.png
        trendsvg: output/in70s/all/0/az/covidadmitted/time*.svg
        trendpng: output/in70s/all/0/az/covidadmitted/time*.png

  model_in70s_all_0_any_death:
    run: r:latest analysis/R/dose_1/model_msm.R in70s all 0 any death 150000 50000
    needs:
    - design
    - data_stset_in70s
    outputs:
      highly_sensitive:
        models: output/in70s/all/0/any/death/model*.rds
        data: output/in70s/all/0/any/death/data*.rds
      moderately_sensitive:
        weights: output/in70s/all/0/any/death/weights*

  report_ipw_in70s_all_0_any_death:
    run: r:latest analysis/R/dose_1/report_ipw.R in70s all 0 any death
    needs:
    - design
    - model_in70s_all_0_any_death
    outputs:
      highly_sensitive:
        broom: output/in70s/all/0/any/death/broom*.rds
      moderately_sensitive:
        data: output/in70s/all/0/any/death/broom*.csv

  report_msm_in70s_all_0_any_death:
    run: r:latest analysis/R/dose_1/report_msm.R in70s all 0 any death
    needs:
    - design
    - model_in70s_all_0_any_death
    outputs:
      moderately_sensitive:
        svg: output/in70s/all/0/any/death/VE_plot.svg
        png: output/in70s/all/0/any/death/VE_plot.png
        tables: output/in70s/all/0/any/death/estimates*.csv

  report_incidence_in70s_all_0_any_death:
    run: r:latest analysis/R/dose_1/report_incidence.R in70s all 0 any death
    needs:
    - design
    - model_in70s_all_0_any_death
    outputs:
      highly_sensitive:
        data: output/in70s/all/0/any/death/data_incidence.rds
      moderately_sensitive:
        cmlsvg: output/in70s/all/0/any/death/cml_incidence*.svg
        cmlpng: output/in70s/all/0/any/death/cml_incidence*.png
        trendsvg: output/in70s/all/0/any/death/time*.svg
        trendpng: output/in70s/all/0/any/death/time*.png

  model_in70s_all_0_pfizer_death:
    run: r:latest analysis/R/dose_1/model_msm.R in70s all 0 pfizer death 150000 50000
    needs:
    - design
    - data_stset_in70s
    outputs:
      highly_sensitive:
        models: output/in70s/all/0/pfizer/death/model*.rds
        data: output/in70s/all/0/pfizer/death/data*.rds
      moderately_sensitive:
        weights: output/in70s/all/0/pfizer/death/weights*

  report_ipw_in70s_all_0_pfizer_death:
    run: r:latest analysis/R/dose_1/report_ipw.R in70s all 0 pfizer death
    needs:
    - design
    - model_in70s_all_0_pfizer_death
    outputs:
      highly_sensitive:
        broom: output/in70s/all/0/pfizer/death/broom*.rds
      moderately_sensitive:
        data: output/in70s/all/0/pfizer/death/broom*.csv

  report_msm_in70s_all_0_pfizer_death:
    run: r:latest analysis/R/dose_1/report_msm.R in70s all 0 pfizer death
    needs:
    - design
    - model_in70s_all_0_pfizer_death
    outputs:
      moderately_sensitive:
        svg: output/in70s/all/0/pfizer/death/VE_plot.svg
        png: output/in70s/all/0/pfizer/death/VE_plot.png
        tables: output/in70s/all/0/pfizer/death/estimates*.csv

  report_incidence_in70s_all_0_pfizer_death:
    run: r:latest analysis/R/dose_1/report_incidence.R in70s all 0 pfizer death
    needs:
    - design
    - model_in70s_all_0_pfizer_death
    outputs:
      highly_sensitive:
        data: output/in70s/all/0/pfizer/death/data_incidence.rds
      moderately_sensitive:
        cmlsvg: output/in70s/all/0/pfizer/death/cml_incidence*.svg
        cmlpng: output/in70s/all/0/pfizer/death/cml_incidence*.png
        trendsvg: output/in70s/all/0/pfizer/death/time*.svg
        trendpng: output/in70s/all/0/pfizer/death/time*.png

  model_in70s_all_0_az_death:
    run: r:latest analysis/R/dose_1/model_msm.R in70s all 0 az death 150000 50000
    needs:
    - design
    - data_stset_in70s
    outputs:
      highly_sensitive:
        models: output/in70s/all/0/az/death/model*.rds
        data: output/in70s/all/0/az/death/data*.rds
      moderately_sensitive:
        weights: output/in70s/all/0/az/death/weights*

  report_ipw_in70s_all_0_az_death:
    run: r:latest analysis/R/dose_1/report_ipw.R in70s all 0 az death
    needs:
    - design
    - model_in70s_all_0_az_death
    outputs:
      highly_sensitive:
        broom: output/in70s/all/0/az/death/broom*.rds
      moderately_sensitive:
        data: output/in70s/all/0/az/death/broom*.csv

  report_msm_in70s_all_0_az_death:
    run: r:latest analysis/R/dose_1/report_msm.R in70s all 0 az death
    needs:
    - design
    - model_in70s_all_0_az_death
    outputs:
      moderately_sensitive:
        svg: output/in70s/all/0/az/death/VE_plot.svg
        png: output/in70s/all/0/az/death/VE_plot.png
        tables: output/in70s/all/0/az/death/estimates*.csv

  report_incidence_in70s_all_0_az_death:
    run: r:latest analysis/R/dose_1/report_incidence.R in70s all 0 az death
    needs:
    - design
    - model_in70s_all_0_az_death
    outputs:
      highly_sensitive:
        data: output/in70s/all/0/az/death/data_incidence.rds
      moderately_sensitive:
        cmlsvg: output/in70s/all/0/az/death/cml_incidence*.svg
        cmlpng: output/in70s/all/0/az/death/cml_incidence*.png
        trendsvg: output/in70s/all/0/az/death/time*.svg
        trendpng: output/in70s/all/0/az/death/time*.png

  report_ipw_in70s_all_0:
    run: r:latest analysis/R/dose_1/report_ipw_combined.R in70s all 0 death
    needs:
    - design
    - report_ipw_in70s_all_0_any_death
    - report_ipw_in70s_all_0_pfizer_death
    - report_ipw_in70s_all_0_az_death
    outputs:
      moderately_sensitive:
        svg: output/in70s/all/0/combined/plot_vax1.svg
        csv: output/in70s/all/0/combined/tab_vax1.csv
        csv_wide: output/in70s/all/0/combined/tab_vax1_wide.csv

  report_msm_in70s_all_0:
    run: r:latest analysis/R/dose_1/report_msm_combined.R in70s all 0
    needs:
    - design
    - report_msm_in70s_all_0_any_postest
    - report_msm_in70s_all_0_any_covidadmitted
    - report_msm_in70s_all_0_any_death
    - report_msm_in70s_all_0_pfizer_postest
    - report_msm_in70s_all_0_pfizer_covidadmitted
    - report_msm_in70s_all_0_pfizer_death
    - report_msm_in70s_all_0_az_postest
    - report_msm_in70s_all_0_az_covidadmitted
    - report_msm_in70s_all_0_az_death
    outputs:
      moderately_sensitive:
        svg: output/in70s/all/0/combined/VE*.svg
        png: output/in70s/all/0/combined/VE*.png
        csv: output/in70s/all/0/combined/*.csv

  report_incidence_in70s_all_0:
    run: r:latest analysis/R/dose_1/report_incidence_combined.R in70s all 0
    needs:
    - design
    - report_incidence_in70s_all_0_any_postest
    - report_incidence_in70s_all_0_any_covidadmitted
    - report_incidence_in70s_all_0_any_death
    - report_incidence_in70s_all_0_pfizer_postest
    - report_incidence_in70s_all_0_pfizer_covidadmitted
    - report_incidence_in70s_all_0_pfizer_death
    - report_incidence_in70s_all_0_az_postest
    - report_incidence_in70s_all_0_az_covidadmitted
    - report_incidence_in70s_all_0_az_death
    outputs:
      moderately_sensitive:
        svg: output/in70s/all/0/combined/cml_incidence*.svg
        png: output/in70s/all/0/combined/cml_incidence*.png

  ## #################################### 
  ## All 
  ## modified estimand 
  ## #################################### 

  descr_preflight_in70s_all_Inf:
    run: r:latest analysis/R/preflight.R in70s all Inf 150000 50000
    needs:
    - design
    - data_stset_in70s
    outputs:
      moderately_sensitive:
        html: output/in70s/descriptive/model-checks/all/Inf/*.html
        csv: output/in70s/descriptive/model-checks/all/Inf/*.csv

  model_in70s_all_Inf_any_postest:
    run: r:latest analysis/R/dose_1/model_msm.R in70s all Inf any postest 150000 50000
    needs:
    - design
    - data_stset_in70s
    outputs:
      highly_sensitive:
        models: output/in70s/all/Inf/any/postest/model*.rds
        data: output/in70s/all/Inf/any/postest/data*.rds
      moderately_sensitive:
        weights: output/in70s/all/Inf/any/postest/weights*

  report_ipw_in70s_all_Inf_any_postest:
    run: r:latest analysis/R/dose_1/report_ipw.R in70s all Inf any postest
    needs:
    - design
    - model_in70s_all_Inf_any_postest
    outputs:
      highly_sensitive:
        broom: output/in70s/all/Inf/any/postest/broom*.rds
      moderately_sensitive:
        data: output/in70s/all/Inf/any/postest/broom*.csv

  report_msm_in70s_all_Inf_any_postest:
    run: r:latest analysis/R/dose_1/report_msm.R in70s all Inf any postest
    needs:
    - design
    - model_in70s_all_Inf_any_postest
    outputs:
      moderately_sensitive:
        svg: output/in70s/all/Inf/any/postest/VE_plot.svg
        png: output/in70s/all/Inf/any/postest/VE_plot.png
        tables: output/in70s/all/Inf/any/postest/estimates*.csv

  report_incidence_in70s_all_Inf_any_postest:
    run: r:latest analysis/R/dose_1/report_incidence.R in70s all Inf any postest
    needs:
    - design
    - model_in70s_all_Inf_any_postest
    outputs:
      highly_sensitive:
        data: output/in70s/all/Inf/any/postest/data_incidence.rds
      moderately_sensitive:
        cmlsvg: output/in70s/all/Inf/any/postest/cml_incidence*.svg
        cmlpng: output/in70s/all/Inf/any/postest/cml_incidence*.png
        trendsvg: output/in70s/all/Inf/any/postest/time*.svg
        trendpng: output/in70s/all/Inf/any/postest/time*.png

  model_in70s_all_Inf_pfizer_postest:
    run: r:latest analysis/R/dose_1/model_msm.R in70s all Inf pfizer postest 150000
      50000
    needs:
    - design
    - data_stset_in70s
    outputs:
      highly_sensitive:
        models: output/in70s/all/Inf/pfizer/postest/model*.rds
        data: output/in70s/all/Inf/pfizer/postest/data*.rds
      moderately_sensitive:
        weights: output/in70s/all/Inf/pfizer/postest/weights*

  report_ipw_in70s_all_Inf_pfizer_postest:
    run: r:latest analysis/R/dose_1/report_ipw.R in70s all Inf pfizer postest
    needs:
    - design
    - model_in70s_all_Inf_pfizer_postest
    outputs:
      highly_sensitive:
        broom: output/in70s/all/Inf/pfizer/postest/broom*.rds
      moderately_sensitive:
        data: output/in70s/all/Inf/pfizer/postest/broom*.csv

  report_msm_in70s_all_Inf_pfizer_postest:
    run: r:latest analysis/R/dose_1/report_msm.R in70s all Inf pfizer postest
    needs:
    - design
    - model_in70s_all_Inf_pfizer_postest
    outputs:
      moderately_sensitive:
        svg: output/in70s/all/Inf/pfizer/postest/VE_plot.svg
        png: output/in70s/all/Inf/pfizer/postest/VE_plot.png
        tables: output/in70s/all/Inf/pfizer/postest/estimates*.csv

  report_incidence_in70s_all_Inf_pfizer_postest:
    run: r:latest analysis/R/dose_1/report_incidence.R in70s all Inf pfizer postest
    needs:
    - design
    - model_in70s_all_Inf_pfizer_postest
    outputs:
      highly_sensitive:
        data: output/in70s/all/Inf/pfizer/postest/data_incidence.rds
      moderately_sensitive:
        cmlsvg: output/in70s/all/Inf/pfizer/postest/cml_incidence*.svg
        cmlpng: output/in70s/all/Inf/pfizer/postest/cml_incidence*.png
        trendsvg: output/in70s/all/Inf/pfizer/postest/time*.svg
        trendpng: output/in70s/all/Inf/pfizer/postest/time*.png

  model_in70s_all_Inf_az_postest:
    run: r:latest analysis/R/dose_1/model_msm.R in70s all Inf az postest 150000 50000
    needs:
    - design
    - data_stset_in70s
    outputs:
      highly_sensitive:
        models: output/in70s/all/Inf/az/postest/model*.rds
        data: output/in70s/all/Inf/az/postest/data*.rds
      moderately_sensitive:
        weights: output/in70s/all/Inf/az/postest/weights*

  report_ipw_in70s_all_Inf_az_postest:
    run: r:latest analysis/R/dose_1/report_ipw.R in70s all Inf az postest
    needs:
    - design
    - model_in70s_all_Inf_az_postest
    outputs:
      highly_sensitive:
        broom: output/in70s/all/Inf/az/postest/broom*.rds
      moderately_sensitive:
        data: output/in70s/all/Inf/az/postest/broom*.csv

  report_msm_in70s_all_Inf_az_postest:
    run: r:latest analysis/R/dose_1/report_msm.R in70s all Inf az postest
    needs:
    - design
    - model_in70s_all_Inf_az_postest
    outputs:
      moderately_sensitive:
        svg: output/in70s/all/Inf/az/postest/VE_plot.svg
        png: output/in70s/all/Inf/az/postest/VE_plot.png
        tables: output/in70s/all/Inf/az/postest/estimates*.csv

  report_incidence_in70s_all_Inf_az_postest:
    run: r:latest analysis/R/dose_1/report_incidence.R in70s all Inf az postest
    needs:
    - design
    - model_in70s_all_Inf_az_postest
    outputs:
      highly_sensitive:
        data: output/in70s/all/Inf/az/postest/data_incidence.rds
      moderately_sensitive:
        cmlsvg: output/in70s/all/Inf/az/postest/cml_incidence*.svg
        cmlpng: output/in70s/all/Inf/az/postest/cml_incidence*.png
        trendsvg: output/in70s/all/Inf/az/postest/time*.svg
        trendpng: output/in70s/all/Inf/az/postest/time*.png

  model_in70s_all_Inf_any_covidadmitted:
    run: r:latest analysis/R/dose_1/model_msm.R in70s all Inf any covidadmitted 150000
      50000
    needs:
    - design
    - data_stset_in70s
    outputs:
      highly_sensitive:
        models: output/in70s/all/Inf/any/covidadmitted/model*.rds
        data: output/in70s/all/Inf/any/covidadmitted/data*.rds
      moderately_sensitive:
        weights: output/in70s/all/Inf/any/covidadmitted/weights*

  report_ipw_in70s_all_Inf_any_covidadmitted:
    run: r:latest analysis/R/dose_1/report_ipw.R in70s all Inf any covidadmitted
    needs:
    - design
    - model_in70s_all_Inf_any_covidadmitted
    outputs:
      highly_sensitive:
        broom: output/in70s/all/Inf/any/covidadmitted/broom*.rds
      moderately_sensitive:
        data: output/in70s/all/Inf/any/covidadmitted/broom*.csv

  report_msm_in70s_all_Inf_any_covidadmitted:
    run: r:latest analysis/R/dose_1/report_msm.R in70s all Inf any covidadmitted
    needs:
    - design
    - model_in70s_all_Inf_any_covidadmitted
    outputs:
      moderately_sensitive:
        svg: output/in70s/all/Inf/any/covidadmitted/VE_plot.svg
        png: output/in70s/all/Inf/any/covidadmitted/VE_plot.png
        tables: output/in70s/all/Inf/any/covidadmitted/estimates*.csv

  report_incidence_in70s_all_Inf_any_covidadmitted:
    run: r:latest analysis/R/dose_1/report_incidence.R in70s all Inf any covidadmitted
    needs:
    - design
    - model_in70s_all_Inf_any_covidadmitted
    outputs:
      highly_sensitive:
        data: output/in70s/all/Inf/any/covidadmitted/data_incidence.rds
      moderately_sensitive:
        cmlsvg: output/in70s/all/Inf/any/covidadmitted/cml_incidence*.svg
        cmlpng: output/in70s/all/Inf/any/covidadmitted/cml_incidence*.png
        trendsvg: output/in70s/all/Inf/any/covidadmitted/time*.svg
        trendpng: output/in70s/all/Inf/any/covidadmitted/time*.png

  model_in70s_all_Inf_pfizer_covidadmitted:
    run: r:latest analysis/R/dose_1/model_msm.R in70s all Inf pfizer covidadmitted
      150000 50000
    needs:
    - design
    - data_stset_in70s
    outputs:
      highly_sensitive:
        models: output/in70s/all/Inf/pfizer/covidadmitted/model*.rds
        data: output/in70s/all/Inf/pfizer/covidadmitted/data*.rds
      moderately_sensitive:
        weights: output/in70s/all/Inf/pfizer/covidadmitted/weights*

  report_ipw_in70s_all_Inf_pfizer_covidadmitted:
    run: r:latest analysis/R/dose_1/report_ipw.R in70s all Inf pfizer covidadmitted
    needs:
    - design
    - model_in70s_all_Inf_pfizer_covidadmitted
    outputs:
      highly_sensitive:
        broom: output/in70s/all/Inf/pfizer/covidadmitted/broom*.rds
      moderately_sensitive:
        data: output/in70s/all/Inf/pfizer/covidadmitted/broom*.csv

  report_msm_in70s_all_Inf_pfizer_covidadmitted:
    run: r:latest analysis/R/dose_1/report_msm.R in70s all Inf pfizer covidadmitted
    needs:
    - design
    - model_in70s_all_Inf_pfizer_covidadmitted
    outputs:
      moderately_sensitive:
        svg: output/in70s/all/Inf/pfizer/covidadmitted/VE_plot.svg
        png: output/in70s/all/Inf/pfizer/covidadmitted/VE_plot.png
        tables: output/in70s/all/Inf/pfizer/covidadmitted/estimates*.csv

  report_incidence_in70s_all_Inf_pfizer_covidadmitted:
    run: r:latest analysis/R/dose_1/report_incidence.R in70s all Inf pfizer covidadmitted
    needs:
    - design
    - model_in70s_all_Inf_pfizer_covidadmitted
    outputs:
      highly_sensitive:
        data: output/in70s/all/Inf/pfizer/covidadmitted/data_incidence.rds
      moderately_sensitive:
        cmlsvg: output/in70s/all/Inf/pfizer/covidadmitted/cml_incidence*.svg
        cmlpng: output/in70s/all/Inf/pfizer/covidadmitted/cml_incidence*.png
        trendsvg: output/in70s/all/Inf/pfizer/covidadmitted/time*.svg
        trendpng: output/in70s/all/Inf/pfizer/covidadmitted/time*.png

  model_in70s_all_Inf_az_covidadmitted:
    run: r:latest analysis/R/dose_1/model_msm.R in70s all Inf az covidadmitted 150000
      50000
    needs:
    - design
    - data_stset_in70s
    outputs:
      highly_sensitive:
        models: output/in70s/all/Inf/az/covidadmitted/model*.rds
        data: output/in70s/all/Inf/az/covidadmitted/data*.rds
      moderately_sensitive:
        weights: output/in70s/all/Inf/az/covidadmitted/weights*

  report_ipw_in70s_all_Inf_az_covidadmitted:
    run: r:latest analysis/R/dose_1/report_ipw.R in70s all Inf az covidadmitted
    needs:
    - design
    - model_in70s_all_Inf_az_covidadmitted
    outputs:
      highly_sensitive:
        broom: output/in70s/all/Inf/az/covidadmitted/broom*.rds
      moderately_sensitive:
        data: output/in70s/all/Inf/az/covidadmitted/broom*.csv

  report_msm_in70s_all_Inf_az_covidadmitted:
    run: r:latest analysis/R/dose_1/report_msm.R in70s all Inf az covidadmitted
    needs:
    - design
    - model_in70s_all_Inf_az_covidadmitted
    outputs:
      moderately_sensitive:
        svg: output/in70s/all/Inf/az/covidadmitted/VE_plot.svg
        png: output/in70s/all/Inf/az/covidadmitted/VE_plot.png
        tables: output/in70s/all/Inf/az/covidadmitted/estimates*.csv

  report_incidence_in70s_all_Inf_az_covidadmitted:
    run: r:latest analysis/R/dose_1/report_incidence.R in70s all Inf az covidadmitted
    needs:
    - design
    - model_in70s_all_Inf_az_covidadmitted
    outputs:
      highly_sensitive:
        data: output/in70s/all/Inf/az/covidadmitted/data_incidence.rds
      moderately_sensitive:
        cmlsvg: output/in70s/all/Inf/az/covidadmitted/cml_incidence*.svg
        cmlpng: output/in70s/all/Inf/az/covidadmitted/cml_incidence*.png
        trendsvg: output/in70s/all/Inf/az/covidadmitted/time*.svg
        trendpng: output/in70s/all/Inf/az/covidadmitted/time*.png

  model_in70s_all_Inf_any_coviddeath:
    run: r:latest analysis/R/dose_1/model_msm.R in70s all Inf any coviddeath 150000
      50000
    needs:
    - design
    - data_stset_in70s
    outputs:
      highly_sensitive:
        models: output/in70s/all/Inf/any/coviddeath/model*.rds
        data: output/in70s/all/Inf/any/coviddeath/data*.rds
      moderately_sensitive:
        weights: output/in70s/all/Inf/any/coviddeath/weights*

  report_ipw_in70s_all_Inf_any_coviddeath:
    run: r:latest analysis/R/dose_1/report_ipw.R in70s all Inf any coviddeath
    needs:
    - design
    - model_in70s_all_Inf_any_coviddeath
    outputs:
      highly_sensitive:
        broom: output/in70s/all/Inf/any/coviddeath/broom*.rds
      moderately_sensitive:
        data: output/in70s/all/Inf/any/coviddeath/broom*.csv

  report_msm_in70s_all_Inf_any_coviddeath:
    run: r:latest analysis/R/dose_1/report_msm.R in70s all Inf any coviddeath
    needs:
    - design
    - model_in70s_all_Inf_any_coviddeath
    outputs:
      moderately_sensitive:
        svg: output/in70s/all/Inf/any/coviddeath/VE_plot.svg
        png: output/in70s/all/Inf/any/coviddeath/VE_plot.png
        tables: output/in70s/all/Inf/any/coviddeath/estimates*.csv

  report_incidence_in70s_all_Inf_any_coviddeath:
    run: r:latest analysis/R/dose_1/report_incidence.R in70s all Inf any coviddeath
    needs:
    - design
    - model_in70s_all_Inf_any_coviddeath
    outputs:
      highly_sensitive:
        data: output/in70s/all/Inf/any/coviddeath/data_incidence.rds
      moderately_sensitive:
        cmlsvg: output/in70s/all/Inf/any/coviddeath/cml_incidence*.svg
        cmlpng: output/in70s/all/Inf/any/coviddeath/cml_incidence*.png
        trendsvg: output/in70s/all/Inf/any/coviddeath/time*.svg
        trendpng: output/in70s/all/Inf/any/coviddeath/time*.png

  model_in70s_all_Inf_pfizer_coviddeath:
    run: r:latest analysis/R/dose_1/model_msm.R in70s all Inf pfizer coviddeath 150000
      50000
    needs:
    - design
    - data_stset_in70s
    outputs:
      highly_sensitive:
        models: output/in70s/all/Inf/pfizer/coviddeath/model*.rds
        data: output/in70s/all/Inf/pfizer/coviddeath/data*.rds
      moderately_sensitive:
        weights: output/in70s/all/Inf/pfizer/coviddeath/weights*

  report_ipw_in70s_all_Inf_pfizer_coviddeath:
    run: r:latest analysis/R/dose_1/report_ipw.R in70s all Inf pfizer coviddeath
    needs:
    - design
    - model_in70s_all_Inf_pfizer_coviddeath
    outputs:
      highly_sensitive:
        broom: output/in70s/all/Inf/pfizer/coviddeath/broom*.rds
      moderately_sensitive:
        data: output/in70s/all/Inf/pfizer/coviddeath/broom*.csv

  report_msm_in70s_all_Inf_pfizer_coviddeath:
    run: r:latest analysis/R/dose_1/report_msm.R in70s all Inf pfizer coviddeath
    needs:
    - design
    - model_in70s_all_Inf_pfizer_coviddeath
    outputs:
      moderately_sensitive:
        svg: output/in70s/all/Inf/pfizer/coviddeath/VE_plot.svg
        png: output/in70s/all/Inf/pfizer/coviddeath/VE_plot.png
        tables: output/in70s/all/Inf/pfizer/coviddeath/estimates*.csv

  report_incidence_in70s_all_Inf_pfizer_coviddeath:
    run: r:latest analysis/R/dose_1/report_incidence.R in70s all Inf pfizer coviddeath
    needs:
    - design
    - model_in70s_all_Inf_pfizer_coviddeath
    outputs:
      highly_sensitive:
        data: output/in70s/all/Inf/pfizer/coviddeath/data_incidence.rds
      moderately_sensitive:
        cmlsvg: output/in70s/all/Inf/pfizer/coviddeath/cml_incidence*.svg
        cmlpng: output/in70s/all/Inf/pfizer/coviddeath/cml_incidence*.png
        trendsvg: output/in70s/all/Inf/pfizer/coviddeath/time*.svg
        trendpng: output/in70s/all/Inf/pfizer/coviddeath/time*.png

  model_in70s_all_Inf_az_coviddeath:
    run: r:latest analysis/R/dose_1/model_msm.R in70s all Inf az coviddeath 150000
      50000
    needs:
    - design
    - data_stset_in70s
    outputs:
      highly_sensitive:
        models: output/in70s/all/Inf/az/coviddeath/model*.rds
        data: output/in70s/all/Inf/az/coviddeath/data*.rds
      moderately_sensitive:
        weights: output/in70s/all/Inf/az/coviddeath/weights*

  report_ipw_in70s_all_Inf_az_coviddeath:
    run: r:latest analysis/R/dose_1/report_ipw.R in70s all Inf az coviddeath
    needs:
    - design
    - model_in70s_all_Inf_az_coviddeath
    outputs:
      highly_sensitive:
        broom: output/in70s/all/Inf/az/coviddeath/broom*.rds
      moderately_sensitive:
        data: output/in70s/all/Inf/az/coviddeath/broom*.csv

  report_msm_in70s_all_Inf_az_coviddeath:
    run: r:latest analysis/R/dose_1/report_msm.R in70s all Inf az coviddeath
    needs:
    - design
    - model_in70s_all_Inf_az_coviddeath
    outputs:
      moderately_sensitive:
        svg: output/in70s/all/Inf/az/coviddeath/VE_plot.svg
        png: output/in70s/all/Inf/az/coviddeath/VE_plot.png
        tables: output/in70s/all/Inf/az/coviddeath/estimates*.csv

  report_incidence_in70s_all_Inf_az_coviddeath:
    run: r:latest analysis/R/dose_1/report_incidence.R in70s all Inf az coviddeath
    needs:
    - design
    - model_in70s_all_Inf_az_coviddeath
    outputs:
      highly_sensitive:
        data: output/in70s/all/Inf/az/coviddeath/data_incidence.rds
      moderately_sensitive:
        cmlsvg: output/in70s/all/Inf/az/coviddeath/cml_incidence*.svg
        cmlpng: output/in70s/all/Inf/az/coviddeath/cml_incidence*.png
        trendsvg: output/in70s/all/Inf/az/coviddeath/time*.svg
        trendpng: output/in70s/all/Inf/az/coviddeath/time*.png

  model_in70s_all_Inf_any_noncoviddeath:
    run: r:latest analysis/R/dose_1/model_msm.R in70s all Inf any noncoviddeath 150000
      50000
    needs:
    - design
    - data_stset_in70s
    outputs:
      highly_sensitive:
        models: output/in70s/all/Inf/any/noncoviddeath/model*.rds
        data: output/in70s/all/Inf/any/noncoviddeath/data*.rds
      moderately_sensitive:
        weights: output/in70s/all/Inf/any/noncoviddeath/weights*

  report_ipw_in70s_all_Inf_any_noncoviddeath:
    run: r:latest analysis/R/dose_1/report_ipw.R in70s all Inf any noncoviddeath
    needs:
    - design
    - model_in70s_all_Inf_any_noncoviddeath
    outputs:
      highly_sensitive:
        broom: output/in70s/all/Inf/any/noncoviddeath/broom*.rds
      moderately_sensitive:
        data: output/in70s/all/Inf/any/noncoviddeath/broom*.csv

  report_msm_in70s_all_Inf_any_noncoviddeath:
    run: r:latest analysis/R/dose_1/report_msm.R in70s all Inf any noncoviddeath
    needs:
    - design
    - model_in70s_all_Inf_any_noncoviddeath
    outputs:
      moderately_sensitive:
        svg: output/in70s/all/Inf/any/noncoviddeath/VE_plot.svg
        png: output/in70s/all/Inf/any/noncoviddeath/VE_plot.png
        tables: output/in70s/all/Inf/any/noncoviddeath/estimates*.csv

  report_incidence_in70s_all_Inf_any_noncoviddeath:
    run: r:latest analysis/R/dose_1/report_incidence.R in70s all Inf any noncoviddeath
    needs:
    - design
    - model_in70s_all_Inf_any_noncoviddeath
    outputs:
      highly_sensitive:
        data: output/in70s/all/Inf/any/noncoviddeath/data_incidence.rds
      moderately_sensitive:
        cmlsvg: output/in70s/all/Inf/any/noncoviddeath/cml_incidence*.svg
        cmlpng: output/in70s/all/Inf/any/noncoviddeath/cml_incidence*.png
        trendsvg: output/in70s/all/Inf/any/noncoviddeath/time*.svg
        trendpng: output/in70s/all/Inf/any/noncoviddeath/time*.png

  model_in70s_all_Inf_pfizer_noncoviddeath:
    run: r:latest analysis/R/dose_1/model_msm.R in70s all Inf pfizer noncoviddeath
      150000 50000
    needs:
    - design
    - data_stset_in70s
    outputs:
      highly_sensitive:
        models: output/in70s/all/Inf/pfizer/noncoviddeath/model*.rds
        data: output/in70s/all/Inf/pfizer/noncoviddeath/data*.rds
      moderately_sensitive:
        weights: output/in70s/all/Inf/pfizer/noncoviddeath/weights*

  report_ipw_in70s_all_Inf_pfizer_noncoviddeath:
    run: r:latest analysis/R/dose_1/report_ipw.R in70s all Inf pfizer noncoviddeath
    needs:
    - design
    - model_in70s_all_Inf_pfizer_noncoviddeath
    outputs:
      highly_sensitive:
        broom: output/in70s/all/Inf/pfizer/noncoviddeath/broom*.rds
      moderately_sensitive:
        data: output/in70s/all/Inf/pfizer/noncoviddeath/broom*.csv

  report_msm_in70s_all_Inf_pfizer_noncoviddeath:
    run: r:latest analysis/R/dose_1/report_msm.R in70s all Inf pfizer noncoviddeath
    needs:
    - design
    - model_in70s_all_Inf_pfizer_noncoviddeath
    outputs:
      moderately_sensitive:
        svg: output/in70s/all/Inf/pfizer/noncoviddeath/VE_plot.svg
        png: output/in70s/all/Inf/pfizer/noncoviddeath/VE_plot.png
        tables: output/in70s/all/Inf/pfizer/noncoviddeath/estimates*.csv

  report_incidence_in70s_all_Inf_pfizer_noncoviddeath:
    run: r:latest analysis/R/dose_1/report_incidence.R in70s all Inf pfizer noncoviddeath
    needs:
    - design
    - model_in70s_all_Inf_pfizer_noncoviddeath
    outputs:
      highly_sensitive:
        data: output/in70s/all/Inf/pfizer/noncoviddeath/data_incidence.rds
      moderately_sensitive:
        cmlsvg: output/in70s/all/Inf/pfizer/noncoviddeath/cml_incidence*.svg
        cmlpng: output/in70s/all/Inf/pfizer/noncoviddeath/cml_incidence*.png
        trendsvg: output/in70s/all/Inf/pfizer/noncoviddeath/time*.svg
        trendpng: output/in70s/all/Inf/pfizer/noncoviddeath/time*.png

  model_in70s_all_Inf_az_noncoviddeath:
    run: r:latest analysis/R/dose_1/model_msm.R in70s all Inf az noncoviddeath 150000
      50000
    needs:
    - design
    - data_stset_in70s
    outputs:
      highly_sensitive:
        models: output/in70s/all/Inf/az/noncoviddeath/model*.rds
        data: output/in70s/all/Inf/az/noncoviddeath/data*.rds
      moderately_sensitive:
        weights: output/in70s/all/Inf/az/noncoviddeath/weights*

  report_ipw_in70s_all_Inf_az_noncoviddeath:
    run: r:latest analysis/R/dose_1/report_ipw.R in70s all Inf az noncoviddeath
    needs:
    - design
    - model_in70s_all_Inf_az_noncoviddeath
    outputs:
      highly_sensitive:
        broom: output/in70s/all/Inf/az/noncoviddeath/broom*.rds
      moderately_sensitive:
        data: output/in70s/all/Inf/az/noncoviddeath/broom*.csv

  report_msm_in70s_all_Inf_az_noncoviddeath:
    run: r:latest analysis/R/dose_1/report_msm.R in70s all Inf az noncoviddeath
    needs:
    - design
    - model_in70s_all_Inf_az_noncoviddeath
    outputs:
      moderately_sensitive:
        svg: output/in70s/all/Inf/az/noncoviddeath/VE_plot.svg
        png: output/in70s/all/Inf/az/noncoviddeath/VE_plot.png
        tables: output/in70s/all/Inf/az/noncoviddeath/estimates*.csv

  report_incidence_in70s_all_Inf_az_noncoviddeath:
    run: r:latest analysis/R/dose_1/report_incidence.R in70s all Inf az noncoviddeath
    needs:
    - design
    - model_in70s_all_Inf_az_noncoviddeath
    outputs:
      highly_sensitive:
        data: output/in70s/all/Inf/az/noncoviddeath/data_incidence.rds
      moderately_sensitive:
        cmlsvg: output/in70s/all/Inf/az/noncoviddeath/cml_incidence*.svg
        cmlpng: output/in70s/all/Inf/az/noncoviddeath/cml_incidence*.png
        trendsvg: output/in70s/all/Inf/az/noncoviddeath/time*.svg
        trendpng: output/in70s/all/Inf/az/noncoviddeath/time*.png

  model_in70s_all_Inf_any_death:
    run: r:latest analysis/R/dose_1/model_msm.R in70s all Inf any death 150000 50000
    needs:
    - design
    - data_stset_in70s
    outputs:
      highly_sensitive:
        models: output/in70s/all/Inf/any/death/model*.rds
        data: output/in70s/all/Inf/any/death/data*.rds
      moderately_sensitive:
        weights: output/in70s/all/Inf/any/death/weights*

  report_ipw_in70s_all_Inf_any_death:
    run: r:latest analysis/R/dose_1/report_ipw.R in70s all Inf any death
    needs:
    - design
    - model_in70s_all_Inf_any_death
    outputs:
      highly_sensitive:
        broom: output/in70s/all/Inf/any/death/broom*.rds
      moderately_sensitive:
        data: output/in70s/all/Inf/any/death/broom*.csv

  report_msm_in70s_all_Inf_any_death:
    run: r:latest analysis/R/dose_1/report_msm.R in70s all Inf any death
    needs:
    - design
    - model_in70s_all_Inf_any_death
    outputs:
      moderately_sensitive:
        svg: output/in70s/all/Inf/any/death/VE_plot.svg
        png: output/in70s/all/Inf/any/death/VE_plot.png
        tables: output/in70s/all/Inf/any/death/estimates*.csv

  report_incidence_in70s_all_Inf_any_death:
    run: r:latest analysis/R/dose_1/report_incidence.R in70s all Inf any death
    needs:
    - design
    - model_in70s_all_Inf_any_death
    outputs:
      highly_sensitive:
        data: output/in70s/all/Inf/any/death/data_incidence.rds
      moderately_sensitive:
        cmlsvg: output/in70s/all/Inf/any/death/cml_incidence*.svg
        cmlpng: output/in70s/all/Inf/any/death/cml_incidence*.png
        trendsvg: output/in70s/all/Inf/any/death/time*.svg
        trendpng: output/in70s/all/Inf/any/death/time*.png

  model_in70s_all_Inf_pfizer_death:
    run: r:latest analysis/R/dose_1/model_msm.R in70s all Inf pfizer death 150000
      50000
    needs:
    - design
    - data_stset_in70s
    outputs:
      highly_sensitive:
        models: output/in70s/all/Inf/pfizer/death/model*.rds
        data: output/in70s/all/Inf/pfizer/death/data*.rds
      moderately_sensitive:
        weights: output/in70s/all/Inf/pfizer/death/weights*

  report_ipw_in70s_all_Inf_pfizer_death:
    run: r:latest analysis/R/dose_1/report_ipw.R in70s all Inf pfizer death
    needs:
    - design
    - model_in70s_all_Inf_pfizer_death
    outputs:
      highly_sensitive:
        broom: output/in70s/all/Inf/pfizer/death/broom*.rds
      moderately_sensitive:
        data: output/in70s/all/Inf/pfizer/death/broom*.csv

  report_msm_in70s_all_Inf_pfizer_death:
    run: r:latest analysis/R/dose_1/report_msm.R in70s all Inf pfizer death
    needs:
    - design
    - model_in70s_all_Inf_pfizer_death
    outputs:
      moderately_sensitive:
        svg: output/in70s/all/Inf/pfizer/death/VE_plot.svg
        png: output/in70s/all/Inf/pfizer/death/VE_plot.png
        tables: output/in70s/all/Inf/pfizer/death/estimates*.csv

  report_incidence_in70s_all_Inf_pfizer_death:
    run: r:latest analysis/R/dose_1/report_incidence.R in70s all Inf pfizer death
    needs:
    - design
    - model_in70s_all_Inf_pfizer_death
    outputs:
      highly_sensitive:
        data: output/in70s/all/Inf/pfizer/death/data_incidence.rds
      moderately_sensitive:
        cmlsvg: output/in70s/all/Inf/pfizer/death/cml_incidence*.svg
        cmlpng: output/in70s/all/Inf/pfizer/death/cml_incidence*.png
        trendsvg: output/in70s/all/Inf/pfizer/death/time*.svg
        trendpng: output/in70s/all/Inf/pfizer/death/time*.png

  model_in70s_all_Inf_az_death:
    run: r:latest analysis/R/dose_1/model_msm.R in70s all Inf az death 150000 50000
    needs:
    - design
    - data_stset_in70s
    outputs:
      highly_sensitive:
        models: output/in70s/all/Inf/az/death/model*.rds
        data: output/in70s/all/Inf/az/death/data*.rds
      moderately_sensitive:
        weights: output/in70s/all/Inf/az/death/weights*

  report_ipw_in70s_all_Inf_az_death:
    run: r:latest analysis/R/dose_1/report_ipw.R in70s all Inf az death
    needs:
    - design
    - model_in70s_all_Inf_az_death
    outputs:
      highly_sensitive:
        broom: output/in70s/all/Inf/az/death/broom*.rds
      moderately_sensitive:
        data: output/in70s/all/Inf/az/death/broom*.csv

  report_msm_in70s_all_Inf_az_death:
    run: r:latest analysis/R/dose_1/report_msm.R in70s all Inf az death
    needs:
    - design
    - model_in70s_all_Inf_az_death
    outputs:
      moderately_sensitive:
        svg: output/in70s/all/Inf/az/death/VE_plot.svg
        png: output/in70s/all/Inf/az/death/VE_plot.png
        tables: output/in70s/all/Inf/az/death/estimates*.csv

  report_incidence_in70s_all_Inf_az_death:
    run: r:latest analysis/R/dose_1/report_incidence.R in70s all Inf az death
    needs:
    - design
    - model_in70s_all_Inf_az_death
    outputs:
      highly_sensitive:
        data: output/in70s/all/Inf/az/death/data_incidence.rds
      moderately_sensitive:
        cmlsvg: output/in70s/all/Inf/az/death/cml_incidence*.svg
        cmlpng: output/in70s/all/Inf/az/death/cml_incidence*.png
        trendsvg: output/in70s/all/Inf/az/death/time*.svg
        trendpng: output/in70s/all/Inf/az/death/time*.png

  report_ipw_in70s_all_Inf:
    run: r:latest analysis/R/dose_1/report_ipw_combined.R in70s all Inf death
    needs:
    - design
    - report_ipw_in70s_all_Inf_any_death
    - report_ipw_in70s_all_Inf_pfizer_death
    - report_ipw_in70s_all_Inf_az_death
    outputs:
      moderately_sensitive:
        svg: output/in70s/all/Inf/combined/plot_vax1.svg
        csv: output/in70s/all/Inf/combined/tab_vax1.csv
        csv_wide: output/in70s/all/Inf/combined/tab_vax1_wide.csv

  report_msm_in70s_all_Inf:
    run: r:latest analysis/R/dose_1/report_msm_combined.R in70s all Inf
    needs:
    - design
    - report_msm_in70s_all_Inf_any_postest
    - report_msm_in70s_all_Inf_any_covidadmitted
    - report_msm_in70s_all_Inf_any_coviddeath
    - report_msm_in70s_all_Inf_any_noncoviddeath
    - report_msm_in70s_all_Inf_any_death
    - report_msm_in70s_all_Inf_pfizer_postest
    - report_msm_in70s_all_Inf_pfizer_covidadmitted
    - report_msm_in70s_all_Inf_pfizer_coviddeath
    - report_msm_in70s_all_Inf_pfizer_noncoviddeath
    - report_msm_in70s_all_Inf_pfizer_death
    - report_msm_in70s_all_Inf_az_postest
    - report_msm_in70s_all_Inf_az_covidadmitted
    - report_msm_in70s_all_Inf_az_coviddeath
    - report_msm_in70s_all_Inf_az_noncoviddeath
    - report_msm_in70s_all_Inf_az_death
    outputs:
      moderately_sensitive:
        svg: output/in70s/all/Inf/combined/VE*.svg
        png: output/in70s/all/Inf/combined/VE*.png
        csv: output/in70s/all/Inf/combined/*.csv

  report_incidence_in70s_all_Inf:
    run: r:latest analysis/R/dose_1/report_incidence_combined.R in70s all Inf
    needs:
    - design
    - report_incidence_in70s_all_Inf_any_postest
    - report_incidence_in70s_all_Inf_any_covidadmitted
    - report_incidence_in70s_all_Inf_any_coviddeath
    - report_incidence_in70s_all_Inf_any_noncoviddeath
    - report_incidence_in70s_all_Inf_any_death
    - report_incidence_in70s_all_Inf_pfizer_postest
    - report_incidence_in70s_all_Inf_pfizer_covidadmitted
    - report_incidence_in70s_all_Inf_pfizer_coviddeath
    - report_incidence_in70s_all_Inf_pfizer_noncoviddeath
    - report_incidence_in70s_all_Inf_pfizer_death
    - report_incidence_in70s_all_Inf_az_postest
    - report_incidence_in70s_all_Inf_az_covidadmitted
    - report_incidence_in70s_all_Inf_az_coviddeath
    - report_incidence_in70s_all_Inf_az_noncoviddeath
    - report_incidence_in70s_all_Inf_az_death
    outputs:
      moderately_sensitive:
        svg: output/in70s/all/Inf/combined/cml_incidence*.svg
        png: output/in70s/all/Inf/combined/cml_incidence*.png

